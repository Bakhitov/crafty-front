# üöÄ **–†–£–ö–û–í–û–î–°–¢–í–û –ü–û –ò–ù–¢–ï–ì–†–ê–¶–ò–ò AGENT-API –î–õ–Ø –§–†–û–ù–¢–ï–ù–î–ê**

**–î–∞—Ç–∞:** –î–µ–∫–∞–±—Ä—å 2024  
**–í–µ—Ä—Å–∏—è API:** v1  
**–ü—Ä–æ–µ–∫—Ç:** Agent API - —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è Agno —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞

---

## üìã **–°–û–î–ï–†–ñ–ê–ù–ò–ï**

1. [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ API](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-api)
3. [–û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã](#–æ—Å–Ω–æ–≤–Ω—ã–µ-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã)
4. [–°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä—ã-–¥–∞–Ω–Ω—ã—Ö)
5. [–°–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞](#—Å–∏—Å—Ç–µ–º–∞-—Å—Ç—Ä–∏–º–∏–Ω–≥–∞)
6. [–ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å](#–º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å)
7. [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-—Å–µ—Å—Å–∏—è–º–∏)
8. [–°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è](#—Å–∏—Å—Ç–µ–º–∞-–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è)
9. [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
10. [–ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](#–ø—Ä–∏–º–µ—Ä—ã-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)

---

## üéØ **–í–í–ï–î–ï–ù–ò–ï**

Agent API - —ç—Ç–æ –º–æ—â–Ω—ã–π REST API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å AI –∞–≥–µ–Ω—Ç–∞–º–∏, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ –±–∞–∑–µ Agno —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞. API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É:

- **–ì–∏–±—Ä–∏–¥–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤** - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ (–ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ) –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ (–∏–∑ –ë–î)
- **–ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç–∏** - —Ç–µ–∫—Å—Ç, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∞—É–¥–∏–æ, –≤–∏–¥–µ–æ, —Ñ–∞–π–ª—ã
- **Real-time —Å—Ç—Ä–∏–º–∏–Ω–≥–∞** - —Å–æ–±—ã—Ç–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏—è–º–∏** - –ø–∞–º—è—Ç—å –∏ –∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤
- **–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### üîó **–ë–∞–∑–æ–≤—ã–π URL**

```
http://localhost:8000/v1
```

### üîë **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏**

- **Agent** - AI –∞–≥–µ–Ω—Ç —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏
- **Run** - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∞–≥–µ–Ω—Ç–æ–º
- **Session** - –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞ —Å –∞–≥–µ–Ω—Ç–æ–º
- **Tool** - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –¥–æ—Å—Ç—É–ø–Ω—ã–π –∞–≥–µ–Ω—Ç—É
- **Event** - —Å–æ–±—ã—Ç–∏–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (—Å—Ç—Ä–∏–º–∏–Ω–≥)

---

## üèóÔ∏è **–ê–†–•–ò–¢–ï–ö–¢–£–†–ê API**

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:**

```
/v1/
‚îú‚îÄ‚îÄ health              # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îú‚îÄ‚îÄ agents/             # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ GET /           # –°–ø–∏—Å–æ–∫ –∞–≥–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ POST /{id}/runs # –ó–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ POST /{id}/runs/{run_id}/continue # –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ GET /{id}/sessions # –°–µ—Å—Å–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ GET /{id}/memories # –ü–∞–º—è—Ç—å
‚îÇ   ‚îî‚îÄ‚îÄ POST /{id}/knowledge/load # –ó–∞–≥—Ä—É–∑–∫–∞ –∑–Ω–∞–Ω–∏–π
‚îú‚îÄ‚îÄ tools/              # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ GET /           # –°–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
‚îî‚îÄ‚îÄ cache/              # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º
    ‚îú‚îÄ‚îÄ GET /stats      # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    ‚îú‚îÄ‚îÄ POST /invalidate # –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è
    ‚îî‚îÄ‚îÄ POST /clear     # –û—á–∏—Å—Ç–∫–∞
```

### **–¢–∏–ø—ã –∞–≥–µ–Ω—Ç–æ–≤:**

1. **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞–≥–µ–Ω—Ç—ã** (–ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ):

   - `web_agent` - –≤–µ–±-–ø–æ–∏—Å–∫ –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
   - `agno_assist` - –ø–æ–º–æ—â—å —Å Agno —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–º
   - `finance_agent` - —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑

2. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∞–≥–µ–Ω—Ç—ã** (–∏–∑ –ë–î):
   - –°–æ–∑–¥–∞—é—Ç—Å—è –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏/–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏)

---

## üåê **–û–°–ù–û–í–ù–´–ï –≠–ù–î–ü–û–ò–ù–¢–´**

### **1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è**

```http
GET /v1/health
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "status": "success"
}
```

### **2. –°–ø–∏—Å–æ–∫ –∞–≥–µ–Ω—Ç–æ–≤**

```http
GET /v1/agents
```

**–û—Ç–≤–µ—Ç:**

```json
["web_agent", "agno_assist", "finance_agent", "my_custom_agent"]
```

### **3. –ó–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–∞**

```http
POST /v1/agents/{agent_id}/runs
Content-Type: multipart/form-data

message: "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?"
stream: true
model: "gpt-4.1-mini-2025-04-14"
session_id: "session-123"
user_id: "user-456"
files: [file1.jpg, file2.pdf]
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- `message` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `stream` (bool, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true) - –ø–æ—Ç–æ–∫–æ–≤—ã–π –æ—Ç–≤–µ—Ç
- `model` (string) - –º–æ–¥–µ–ª—å –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- `session_id` (string) - ID —Å–µ—Å—Å–∏–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- `user_id` (string) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `files` (array) - –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã

### **4. –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**

```http
POST /v1/agents/{agent_id}/runs/{run_id}/continue
Content-Type: multipart/form-data

tools: "[]"
session_id: "session-123"
user_id: "user-456"
stream: true
```

### **5. –°–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤**

```http
GET /v1/tools?type_filter=builtin&category=search&is_active=true
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- `type_filter` - —Ç–∏–ø (builtin, mcp, custom)
- `category` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è (search, files, etc.)
- `is_active` - —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true)

---

## üìä **–°–¢–†–£–ö–¢–£–†–´ –î–ê–ù–ù–´–•**

### **Agent Response (Non-streaming)**

```typescript
interface AgentResponse {
  content: string // –û—Å–Ω–æ–≤–Ω–æ–π –æ—Ç–≤–µ—Ç
  run_id?: string // ID –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
  session_id?: string // ID —Å–µ—Å—Å–∏–∏
  created_at?: number // Timestamp
  images?: MediaItem[] // –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  videos?: MediaItem[] // –í–∏–¥–µ–æ
  audio?: MediaItem[] // –ê—É–¥–∏–æ
  response_audio?: string // –°–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–µ—á—å
  metrics?: {
    input_tokens: number
    output_tokens: number
    total_cost: number
  }
}
```

### **Tool Structure**

```typescript
interface Tool {
  id: string
  name: string
  type: 'builtin' | 'mcp' | 'custom'
  description: string
  display_name: string
  category: string
  is_public: boolean
  is_active: boolean
}
```

### **Session Structure**

```typescript
interface Session {
  session_id: string
  session_name?: string
  created_at: string
  title: string
}
```

### **Memory Structure**

```typescript
interface Memory {
  memory: string
  topics: string[]
  last_updated?: string
}
```

---

## üåä **–°–ò–°–¢–ï–ú–ê –°–¢–†–ò–ú–ò–ù–ì–ê**

### **–°–æ–±—ã—Ç–∏—è Agno**

API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Å–æ–±—ã—Ç–∏–π Agno –¥–ª—è real-time –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤:

```typescript
type AgnoEvent =
  | 'RunStarted'
  | 'RunResponseContent' // –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
  | 'RunCompleted'
  | 'ToolCallStarted'
  | 'ToolCallCompleted' // –†–µ–∑—É–ª—å—Ç–∞—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
  | 'ReasoningStarted'
  | 'ReasoningStep'
  | 'RunError' // –û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
```

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–±—ã—Ç–∏—è**

```typescript
interface StreamEvent {
  event: AgnoEvent
  content?: string
  agent_id?: string
  run_id?: string
  created_at: number

  // –ú–µ–¥–∏–∞ –∫–æ–Ω—Ç–µ–Ω—Ç (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ–±—ã—Ç–∏—è)
  images?: MediaItem[]
  videos?: MediaItem[]
  audio?: MediaItem[]
  response_audio?: string

  // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–µ (–¥–ª—è ToolCall —Å–æ–±—ã—Ç–∏–π)
  tool_name?: string
  tool_input?: any
  tool_output?: any

  // –û—à–∏–±–∫–∏
  error_type?: 'NotFound' | 'RuntimeError' | 'General'
}
```

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–∏–º–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ**

```javascript
// –°–æ–∑–¥–∞–Ω–∏–µ EventSource –¥–ª—è —Å—Ç—Ä–∏–º–∏–Ω–≥–∞
const eventSource = new EventSource('/v1/agents/web_agent/runs', {
  method: 'POST',
  body: formData
})

eventSource.onmessage = (event) => {
  const data = JSON.parse(event.data)

  switch (data.event) {
    case 'RunStarted':
      console.log('–ê–≥–µ–Ω—Ç –Ω–∞—á–∞–ª —Ä–∞–±–æ—Ç—É')
      break

    case 'RunResponseContent':
      // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –≤ UI
      appendContent(data.content)

      // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –º–µ–¥–∏–∞
      if (data.images) {
        displayImages(data.images)
      }
      break

    case 'ToolCallStarted':
      showToolIndicator(data.tool_name)
      break

    case 'ToolCallCompleted':
      hideToolIndicator()
      if (data.tool_output) {
        displayToolResult(data.tool_output)
      }
      break

    case 'RunCompleted':
      console.log('–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ')
      eventSource.close()
      break

    case 'RunError':
      console.error('–û—à–∏–±–∫–∞:', data.content)
      showError(data.content)
      break
  }
}
```

---

## üé≠ **–ú–£–õ–¨–¢–ò–ú–û–î–ê–õ–¨–ù–û–°–¢–¨**

### **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤**

#### **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:**

- JPEG, PNG, GIF, WebP
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ —Å—Ç—Ä–∏–º–∏–Ω–≥–µ

#### **–î–æ–∫—É–º–µ–Ω—Ç—ã:**

- PDF - –Ω–∞—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Agno
- CSV - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ —Ç–µ–∫—Å—Ç
- TXT, JSON - –ø—Ä—è–º–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

#### **–ê—É–¥–∏–æ –∏ –≤–∏–¥–µ–æ:**

- MP3, WAV, MP4, MOV
- –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∏ –∞–Ω–∞–ª–∏–∑ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ

### **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤**

```javascript
// –°–æ–∑–¥–∞–Ω–∏–µ FormData —Å —Ñ–∞–π–ª–∞–º–∏
const formData = new FormData()
formData.append('message', '–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —ç—Ç–∏ —Ñ–∞–π–ª—ã')
formData.append('files', imageFile)
formData.append('files', pdfFile)
formData.append('stream', 'true')

fetch('/v1/agents/web_agent/runs', {
  method: 'POST',
  body: formData
})
```

### **–ú–µ–¥–∏–∞ –≤ –æ—Ç–≤–µ—Ç–∞—Ö**

```typescript
interface MediaItem {
  url?: string // URL –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
  content?: string // Base64 –∫–æ–Ω—Ç–µ–Ω—Ç
  content_type: string // MIME —Ç–∏–ø
  name?: string // –ò–º—è —Ñ–∞–π–ª–∞
  size?: number // –†–∞–∑–º–µ—Ä –≤ –±–∞–π—Ç–∞—Ö
}
```

---

## üíæ **–£–ü–†–ê–í–õ–ï–ù–ò–ï –°–ï–°–°–ò–Ø–ú–ò**

### **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π**

```http
GET /v1/agents/{agent_id}/sessions?user_id=user-123
```

### **–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Å–µ—Å—Å–∏—è**

```http
GET /v1/agents/{agent_id}/sessions/{session_id}?user_id=user-123
```

### **–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏**

```http
POST /v1/agents/{agent_id}/sessions/{session_id}/rename
Content-Type: application/json

{
  "name": "–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏",
  "user_id": "user-123"
}
```

### **–£–¥–∞–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏**

```http
DELETE /v1/agents/{agent_id}/sessions/{session_id}?user_id=user-123
```

### **–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏**

```http
GET /v1/agents/{agent_id}/memories?user_id=user-123
```

---

## ‚ö° **–°–ò–°–¢–ï–ú–ê –ö–≠–®–ò–†–û–í–ê–ù–ò–Ø**

### **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞**

```http
GET /v1/cache/stats
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "agents_cache": {
    "total": 5,
    "active": 3,
    "expired": 2,
    "ttl_seconds": 3600
  },
  "tools_cache": {
    "total": 12,
    "active": 10,
    "expired": 2,
    "ttl_seconds": 7200
  },
  "total_cached_objects": 17
}
```

### **–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞**

```http
POST /v1/cache/invalidate
Content-Type: application/json

{
  "agent_id": "my_custom_agent"  // –∏–ª–∏ user_id, tool_id
}
```

### **–ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞**

```http
POST /v1/cache/clear
```

---

## ‚ùå **–û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö**

### **HTTP –∫–æ–¥—ã –æ—à–∏–±–æ–∫:**

- `400 Bad Request` - –Ω–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- `404 Not Found` - –∞–≥–µ–Ω—Ç/—Å–µ—Å—Å–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
- `422 Validation Error` - –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- `500 Internal Server Error` - –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—à–∏–±–∫–∏
- `501 Not Implemented` - —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—à–∏–±–∫–∏:**

```json
{
  "detail": "Agent not found",
  "status_code": 404
}
```

### **–û—à–∏–±–∫–∏ –≤ —Å—Ç—Ä–∏–º–∏–Ω–≥–µ:**

```json
{
  "event": "RunError",
  "content": "Continue run failed: Run not found",
  "error_type": "NotFound",
  "created_at": 1703123456
}
```

---

## üíª **–ü–†–ò–ú–ï–†–´ –ò–ù–¢–ï–ì–†–ê–¶–ò–ò**

### **React Hook –¥–ª—è –∞–≥–µ–Ω—Ç–∞**

```typescript
import { useState, useCallback } from 'react'

interface UseAgentOptions {
  agentId: string
  userId?: string
  sessionId?: string
}

export const useAgent = ({ agentId, userId, sessionId }: UseAgentOptions) => {
  const [isLoading, setIsLoading] = useState(false)
  const [response, setResponse] = useState<string>('')
  const [error, setError] = useState<string | null>(null)

  const sendMessage = useCallback(
    async (message: string, files?: File[]) => {
      setIsLoading(true)
      setError(null)
      setResponse('')

      const formData = new FormData()
      formData.append('message', message)
      formData.append('stream', 'true')

      if (userId) formData.append('user_id', userId)
      if (sessionId) formData.append('session_id', sessionId)

      files?.forEach((file) => {
        formData.append('files', file)
      })

      try {
        const response = await fetch(`/v1/agents/${agentId}/runs`, {
          method: 'POST',
          body: formData
        })

        if (!response.ok) {
          throw new Error(`HTTP ${response.status}`)
        }

        const reader = response.body?.getReader()
        if (!reader) return

        while (true) {
          const { done, value } = await reader.read()
          if (done) break

          const chunk = new TextDecoder().decode(value)
          const lines = chunk.split('\n').filter(Boolean)

          for (const line of lines) {
            try {
              const event = JSON.parse(line)

              if (event.event === 'RunResponseContent') {
                setResponse((prev) => prev + event.content)
              } else if (event.event === 'RunError') {
                setError(event.content)
              }
            } catch (e) {
              // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON
            }
          }
        }
      } catch (err) {
        setError(err instanceof Error ? err.message : 'Unknown error')
      } finally {
        setIsLoading(false)
      }
    },
    [agentId, userId, sessionId]
  )

  return { sendMessage, isLoading, response, error }
}
```

### **Vue Composable**

```typescript
import { ref, computed } from 'vue'

export const useAgentChat = (agentId: string) => {
  const messages = ref<
    Array<{
      id: string
      content: string
      role: 'user' | 'assistant'
      timestamp: Date
      files?: File[]
    }>
  >([])

  const isLoading = ref(false)
  const currentResponse = ref('')

  const sendMessage = async (content: string, files?: File[]) => {
    const userMessage = {
      id: Date.now().toString(),
      content,
      role: 'user' as const,
      timestamp: new Date(),
      files
    }

    messages.value.push(userMessage)
    isLoading.value = true
    currentResponse.value = ''

    const formData = new FormData()
    formData.append('message', content)
    formData.append('stream', 'true')

    files?.forEach((file) => {
      formData.append('files', file)
    })

    try {
      const response = await fetch(`/v1/agents/${agentId}/runs`, {
        method: 'POST',
        body: formData
      })

      const reader = response.body?.getReader()
      if (!reader) return

      let assistantMessage = {
        id: (Date.now() + 1).toString(),
        content: '',
        role: 'assistant' as const,
        timestamp: new Date()
      }

      messages.value.push(assistantMessage)

      while (true) {
        const { done, value } = await reader.read()
        if (done) break

        const chunk = new TextDecoder().decode(value)
        const lines = chunk.split('\n').filter(Boolean)

        for (const line of lines) {
          try {
            const event = JSON.parse(line)

            if (event.event === 'RunResponseContent') {
              assistantMessage.content += event.content
              currentResponse.value = assistantMessage.content
            }
          } catch (e) {
            // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON
          }
        }
      }
    } catch (error) {
      console.error('Error sending message:', error)
    } finally {
      isLoading.value = false
      currentResponse.value = ''
    }
  }

  return {
    messages: computed(() => messages.value),
    isLoading: computed(() => isLoading.value),
    currentResponse: computed(() => currentResponse.value),
    sendMessage
  }
}
```

### **Vanilla JavaScript –∫–ª–∞—Å—Å**

```javascript
class AgentAPI {
  constructor(baseUrl = '/v1') {
    this.baseUrl = baseUrl
  }

  async getAgents() {
    const response = await fetch(`${this.baseUrl}/agents`)
    return response.json()
  }

  async getTools(filters = {}) {
    const params = new URLSearchParams(filters)
    const response = await fetch(`${this.baseUrl}/tools?${params}`)
    return response.json()
  }

  async *streamChat(agentId, message, options = {}) {
    const formData = new FormData()
    formData.append('message', message)
    formData.append('stream', 'true')

    Object.entries(options).forEach(([key, value]) => {
      if (value !== undefined) {
        if (key === 'files' && Array.isArray(value)) {
          value.forEach((file) => formData.append('files', file))
        } else {
          formData.append(key, value.toString())
        }
      }
    })

    const response = await fetch(`${this.baseUrl}/agents/${agentId}/runs`, {
      method: 'POST',
      body: formData
    })

    if (!response.ok) {
      throw new Error(`HTTP ${response.status}: ${response.statusText}`)
    }

    const reader = response.body.getReader()

    try {
      while (true) {
        const { done, value } = await reader.read()
        if (done) break

        const chunk = new TextDecoder().decode(value)
        const lines = chunk.split('\n').filter(Boolean)

        for (const line of lines) {
          try {
            const event = JSON.parse(line)
            yield event
          } catch (e) {
            // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON
          }
        }
      }
    } finally {
      reader.releaseLock()
    }
  }

  async getSessions(agentId, userId) {
    const params = userId ? `?user_id=${userId}` : ''
    const response = await fetch(
      `${this.baseUrl}/agents/${agentId}/sessions${params}`
    )
    return response.json()
  }

  async getMemories(agentId, userId) {
    const response = await fetch(
      `${this.baseUrl}/agents/${agentId}/memories?user_id=${userId}`
    )
    return response.json()
  }

  async getCacheStats() {
    const response = await fetch(`${this.baseUrl}/cache/stats`)
    return response.json()
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const api = new AgentAPI()

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∞–≥–µ–Ω—Ç–æ–≤
const agents = await api.getAgents()

// –°—Ç—Ä–∏–º–∏–Ω–≥ —á–∞—Ç–∞
for await (const event of api.streamChat('web_agent', '–ü—Ä–∏–≤–µ—Ç!', {
  user_id: 'user-123',
  session_id: 'session-456'
})) {
  if (event.event === 'RunResponseContent') {
    console.log('–ù–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç:', event.content)
  }
}
```

---

---

**üéØ –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Agent API —Å –ª—é–±—ã–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–º. –î–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ API_ENDPOINT_TEST.md –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.**
