# –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –∞–≥–µ–Ω—Ç–æ–≤ Agno Framework

## –í–≤–µ–¥–µ–Ω–∏–µ

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∏–π –∞–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–ª–∞—Å—Å–∞ `Agent` –≤ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ Agno, –∏—Ö –≤–∑–∞–∏–º–æ—Å–≤—è–∑–µ–π –∏ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ —Ä–∞–±–æ—Ç—ã. –ê–Ω–∞–ª–∏–∑ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –∏–∑—É—á–µ–Ω–∏–∏ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ Agno –≤–µ—Ä—Å–∏–∏, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –≤ –ø—Ä–æ–µ–∫—Ç–µ (.venv/lib/python3.12/site-packages/agno).

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞–≥–µ–Ω—Ç–æ–≤ –≤ –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ

–í –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–∏–±—Ä–∏–¥–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞–≥–µ–Ω—Ç–æ–≤:

### 1. –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞–≥–µ–Ω—Ç—ã (Hardcoded)

- **AgnoAssist** (`agno_assist`) - –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—É Agno
- **WebAgent** (`web_agent`) - –≤–µ–±-–ø–æ–∏—Å–∫–æ–≤—ã–π –∞–≥–µ–Ω—Ç
- **FinanceAgent** (`finance_agent`) - —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫

### 2. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∞–≥–µ–Ω—Ç—ã (Database-driven)

- –•—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `agents` PostgreSQL
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ JSON –ø–æ–ª—è `model_config` –∏ `agent_config`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

## üöÄ –ü–†–ê–ö–¢–ò–ß–ï–°–ö–û–ï –†–£–ö–û–í–û–î–°–¢–í–û: –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã agents

```sql
-- –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã agents
CREATE TABLE agents (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    agent_id VARCHAR(255) UNIQUE NOT NULL,
    name VARCHAR(255) NOT NULL,
    description TEXT,

    -- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–û–°–ù–û–í–ù–´–ï –ü–û–õ–Ø)
    model_config JSONB NOT NULL DEFAULT '{"provider": "openai", "id": "gpt-4.1-mini-2025-04-14"}',
    system_instructions TEXT[] DEFAULT '{}',
    tool_ids UUID[] DEFAULT '{}',
    agent_config JSONB NOT NULL DEFAULT '{}',

    -- –ù–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—è Agno (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ agent_config)
    goal TEXT,                    -- –¶–µ–ª—å –∞–≥–µ–Ω—Ç–∞ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ agent_config.goal)
    expected_output TEXT,         -- –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ agent_config.expected_output)
    role VARCHAR(255),            -- –†–æ–ª—å –≤ –∫–æ–º–∞–Ω–¥–µ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ agent_config.role)

    -- –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å
    is_public BOOLEAN DEFAULT false,
    company_id UUID,
    user_id VARCHAR(255),
    photo TEXT,
    category TEXT,

    -- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

### 1. –ë–∞–∑–æ–≤—ã–π –∞–≥–µ–Ω—Ç-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç

```sql
INSERT INTO agents (
    agent_id,
    name,
    description,
    system_instructions,
    model_config,
    agent_config,
    is_public
) VALUES (
    'basic_assistant',
    '–ë–∞–∑–æ–≤—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç',
    '–ü—Ä–æ—Å—Ç–æ–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –æ–±—â–∏—Ö –∑–∞–¥–∞—á',
    ARRAY['–¢—ã –ø–æ–ª–µ–∑–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç', '–û—Ç–≤–µ—á–∞–π –∫—Ä–∞—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É', '–ò—Å–ø–æ–ª—å–∑—É–π —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫'],
    '{
        "provider": "openai",
        "id": "gpt-4.1-mini-2025-04-14",
        "temperature": 0.7,
        "max_tokens": 2000
    }',
    '{
        "storage": {
            "table_name": "sessions"
        },
        "history": {
            "add_history_to_messages": true,
            "num_history_runs": 3,
            "read_chat_history": true
        },
        "markdown": true,
        "add_datetime_to_instructions": true,
        "debug_mode": false
    }',
    true
);
```

### 2. –ê–≥–µ–Ω—Ç —Å –ø–∞–º—è—Ç—å—é –∏ –∑–Ω–∞–Ω–∏—è–º–∏ (RAG)

```sql
INSERT INTO agents (
    agent_id,
    name,
    description,
    system_instructions,
    model_config,
    agent_config,
    goal,                    -- DB –ø–æ–ª–µ –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ agent_config.goal
    expected_output,         -- DB –ø–æ–ª–µ –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ agent_config.expected_output
    is_public
) VALUES (
    'smart_assistant',
    '–£–º–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å –ø–∞–º—è—Ç—å—é',
    '–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç—å—é –∏ –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π',
    ARRAY[
        '–¢—ã —É–º–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π',
        '–ò—Å–ø–æ–ª—å–∑—É–π —Å–≤–æ—é –ø–∞–º—è—Ç—å –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤',
        '–ü—Ä–∏ –ø–æ–∏—Å–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ —Å—Å—ã–ª–∞–π—Å—è –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∏'
    ],
    '{
        "provider": "openai",
        "id": "gpt-4.1-2025-04-14",
        "temperature": 0.3,
        "max_tokens": 4000
    }',
    '{
        "storage": {
            "table_name": "sessions"
        },
        "memory": {
            "enabled": true,
            "table_name": "user_memories",
            "delete_memories": true,
            "clear_memories": true
        },
        "knowledge": {
            "enabled": true,
            "type": "url",
            "urls": ["https://docs.agno.com"],
            "table_name": "knowledge"
        },
        "history": {
            "add_history_to_messages": true,
            "num_history_runs": 5,
            "read_chat_history": true
        },
        "enable_agentic_memory": true,
        "search_knowledge": true,
        "add_references": true,
        "references_format": "json",
        "markdown": true,
        "add_datetime_to_instructions": true,
        "add_state_in_messages": true
    }',
    '–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ø–æ–º–æ—â—å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞–º—è—Ç–∏ –∏ –∑–Ω–∞–Ω–∏–π',
    '–ü–æ–¥—Ä–æ–±–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Å —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏ —É—á–µ—Ç–æ–º –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π',
    true
);
```

### 3. –ê–≥–µ–Ω—Ç-–∞–Ω–∞–ª–∏—Ç–∏–∫ —Å —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è–º–∏

```sql
INSERT INTO agents (
    agent_id,
    name,
    description,
    system_instructions,
    model_config,
    agent_config,
    role,                    -- DB –ø–æ–ª–µ –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ agent_config.role
    is_public
) VALUES (
    'analyst_agent',
    '–ê–≥–µ–Ω—Ç-–∞–Ω–∞–ª–∏—Ç–∏–∫',
    '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç –¥–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö',
    ARRAY[
        '–¢—ã —ç–∫—Å–ø–µ—Ä—Ç-–∞–Ω–∞–ª–∏—Ç–∏–∫ –¥–∞–Ω–Ω—ã—Ö',
        '–ò—Å–ø–æ–ª—å–∑—É–π –ø–æ—à–∞–≥–æ–≤–æ–µ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–µ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á',
        '–í—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–π –ª–æ–≥–∏–∫—É —Å–≤–æ–∏—Ö –≤—ã–≤–æ–¥–æ–≤'
    ],
    '{
        "provider": "openai",
        "id": "gpt-4.1-2025-04-14",
        "temperature": 0.1,
        "max_tokens": 8000
    }',
    '{
        "storage": {
            "table_name": "sessions"
        },
        "reasoning": {
            "enabled": true,
            "model_id": "gpt-4.1-2025-04-14",
            "min_steps": 2,
            "max_steps": 10
        },
        "parser": {
            "enabled": true,
            "model_id": "gpt-4.1-mini-2025-04-14"
        },
        "history": {
            "add_history_to_messages": true,
            "num_history_runs": 10,
            "read_chat_history": true
        },
        "structured_outputs": true,
        "show_tool_calls": true,
        "tool_call_limit": 20,
        "markdown": true,
        "add_datetime_to_instructions": true
    }',
    'analyst',
    true
);
```

### 4. –ê–≥–µ–Ω—Ç —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–±–æ—Ç–æ–π

```sql
-- –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã –∫–∞—Å—Ç–æ–º–Ω—ã–µ)
INSERT INTO tools (
    id,
    name,
    description,
    function_definition,
    is_active
) VALUES (
    gen_random_uuid(),
    'calculator',
    '–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π',
    '{
        "type": "function",
        "function": {
            "name": "calculate",
            "description": "–í—ã–ø–æ–ª–Ω—è–µ—Ç –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è",
            "parameters": {
                "type": "object",
                "properties": {
                    "expression": {
                        "type": "string",
                        "description": "–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è"
                    }
                },
                "required": ["expression"]
            }
        }
    }',
    true
);

-- –°–æ–∑–¥–∞–µ–º –∞–≥–µ–Ω—Ç–∞ —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
INSERT INTO agents (
    agent_id,
    name,
    description,
    system_instructions,
    model_config,
    tool_ids,
    agent_config,
    role,                    -- DB –ø–æ–ª–µ –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ agent_config.role
    is_public
) VALUES (
    'math_assistant',
    '–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–º–æ—â–Ω–∏–∫',
    '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á',
    ARRAY[
        '–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ',
        '–ò—Å–ø–æ–ª—å–∑—É–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è —Ç–æ—á–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π',
        '–û–±—ä—è—Å–Ω—è–π –∫–∞–∂–¥—ã–π —à–∞–≥ —Ä–µ—à–µ–Ω–∏—è'
    ],
    '{
        "provider": "openai",
        "id": "gpt-4.1-2025-04-14",
        "temperature": 0.0
    }',
    ARRAY[(SELECT id FROM tools WHERE name = 'calculator')],
    '{
        "storage": {
            "table_name": "sessions"
        },
        "history": {
            "add_history_to_messages": true,
            "num_history_runs": 5
        },
        "show_tool_calls": true,
        "tool_call_limit": 10,
        "team": {
            "enabled": true,
            "respond_directly": false,
            "add_transfer_instructions": true
        },
        "markdown": true,
        "add_datetime_to_instructions": true
    }',
    'specialist',
    true
);
```

### 5. –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```sql
INSERT INTO agents (
    agent_id,
    name,
    description,
    system_instructions,
    model_config,
    agent_config,
    user_id,  -- –í–ê–ñ–ù–û: –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    is_public
) VALUES (
    'personal_assistant_user123',
    '–ú–æ–π –ª–∏—á–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫',
    '–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
    ARRAY[
        '–¢—ã –º–æ–π –ª–∏—á–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫',
        '–ó–Ω–∞–µ—à—å –º–æ–∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∏ –∏—Å—Ç–æ—Ä–∏—é',
        '–í—Å–µ–≥–¥–∞ –æ–±—Ä–∞—â–∞–π—Å—è –∫–æ –º–Ω–µ –ø–æ –∏–º–µ–Ω–∏'
    ],
    '{
        "provider": "openai",
        "id": "gpt-4.1-mini-2025-04-14",
        "temperature": 0.5
    }',
    '{
        "storage": {
            "table_name": "sessions"
        },
        "memory": {
            "enabled": true,
            "table_name": "user_memories",
            "delete_memories": false,
            "clear_memories": false
        },
        "history": {
            "add_history_to_messages": true,
            "num_history_runs": 10,
            "read_chat_history": true
        },
        "enable_agentic_memory": true,
        "enable_user_memories": true,
        "search_previous_sessions_history": true,
        "num_history_sessions": 5,
        "add_state_in_messages": true,
        "markdown": true,
        "add_datetime_to_instructions": true,
        "add_name_to_instructions": true
    }',
    'user123',  -- ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    false  -- –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∞–≥–µ–Ω—Ç
);
```

## üéØ –û–°–û–ë–´–ï –ü–û–õ–Ø –° –ü–†–ò–û–†–ò–¢–ï–¢–û–ú

### –ù–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—è Agno –≤ —Ç–∞–±–ª–∏—Ü–µ agents

–≠—Ç–∏ –ø–æ–ª—è –∏–º–µ—é—Ç **–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ agent_config** –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ—Å–æ–±—ã–º –æ–±—Ä–∞–∑–æ–º –≤ `selector.py`:

```sql
-- –í —Ç–∞–±–ª–∏—Ü–µ agents
goal TEXT,                    -- –¶–µ–ª—å –∞–≥–µ–Ω—Ç–∞ –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
expected_output TEXT,         -- –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–∞
role VARCHAR(255),            -- –†–æ–ª—å –∞–≥–µ–Ω—Ç–∞ –≤ –∫–æ–º–∞–Ω–¥–µ
```

### –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –≤ –∫–æ–¥–µ

```python
# –í agents/selector.py (—Å—Ç—Ä–æ–∫–∏ 324-326, 367)
"goal": dynamic_agent.goal or agent_config.get("goal"),
"expected_output": dynamic_agent.expected_output or agent_config.get("expected_output"),
"role": dynamic_agent.role or agent_config.get("role"),
```

**–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:**

- ‚úÖ –ï—Å–ª–∏ –ø–æ–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –≤ –ë–î ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ë–î
- ‚úÖ –ï—Å–ª–∏ –ø–æ–ª–µ NULL –≤ –ë–î ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `agent_config`
- ‚úÖ –ï—Å–ª–∏ –Ω–µ—Ç –Ω–∏ —Ç–∞–º, –Ω–∏ —Ç–∞–º ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `None`

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä

```sql
-- –°–æ–∑–¥–∞–µ–º –∞–≥–µ–Ω—Ç–∞ —Å DB –ø–æ–ª—è–º–∏
INSERT INTO agents (
    agent_id, name,
    goal, expected_output, role,  -- –ó–∞–ø–æ–ª–Ω—è–µ–º –≤ –ë–î
    agent_config
) VALUES (
    'example_agent', '–ü—Ä–∏–º–µ—Ä',
    '–ü–æ–º–æ–≥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º',                    -- DB: goal
    '–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ',      -- DB: expected_output
    'assistant',                                 -- DB: role
    '{
        "goal": "–≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –±—É–¥–µ—Ç –ò–ì–ù–û–†–ò–†–û–í–ê–ù–û",           -- agent_config –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
        "expected_output": "–ò —ç—Ç–æ —Ç–æ–∂–µ –ò–ì–ù–û–†–ò–†–û–í–ê–ù–û",        -- agent_config –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
        "role": "–ò —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ–∂–µ –ò–ì–ù–û–†–ò–†–û–í–ê–ù–û",          -- agent_config –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
        "markdown": true
    }'
);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ê–≥–µ–Ω—Ç –ø–æ–ª—É—á–∏—Ç `goal`, `expected_output`, `role` –∏–∑ DB –ø–æ–ª–µ–π, –∞ `markdown` –∏–∑ `agent_config`.

## üìã –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

### model_config (JSONB) - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥–µ–ª–∏ OpenAI

```json
{
  // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  "provider": "openai",
  "id": "gpt-4.1-2025-04-14",
  "temperature": 0.7,
  "max_tokens": 4000,
  "max_completion_tokens": 3000,
  "top_p": 0.9,
  "frequency_penalty": 0.0,
  "presence_penalty": 0.0,
  "seed": 42,
  "stop": ["END", "STOP"],

  // –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  "reasoning_effort": "high",
  "store": true,
  "metadata": { "version": "1.0" },
  "modalities": ["text", "audio"],
  "audio": { "voice": "alloy", "format": "mp3" },

  // –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  "api_key": "sk-...",
  "organization": "org-...",
  "base_url": "https://api.openai.com/v1",
  "timeout": 60.0,
  "max_retries": 3
}
```

### agent_config (JSONB) - –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–∞

```json
{
  // 1. –•—Ä–∞–Ω–∏–ª–∏—â–µ –∏ —Å–µ—Å—Å–∏–∏
  "storage": {
    "table_name": "sessions",
    "schema": "public"
  },
  "session_name": "–†–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏",
  "session_state": { "current_task": "analysis" },
  "search_previous_sessions_history": true,
  "num_history_sessions": 5,
  "cache_session": true,

  // 2. –ö–æ–Ω—Ç–µ–∫—Å—Ç
  "context": { "department": "IT", "role": "developer" },
  "add_context": true,
  "resolve_context": true,

  // 3. –ü–∞–º—è—Ç—å (v2)
  "memory": {
    "enabled": true,
    "table_name": "user_memories",
    "delete_memories": true,
    "clear_memories": true
  },
  "enable_agentic_memory": true,
  "enable_user_memories": true,
  "add_memory_references": true,
  "enable_session_summaries": true,
  "add_session_summary_references": true,

  // 4. –ò—Å—Ç–æ—Ä–∏—è
  "history": {
    "add_history_to_messages": true,
    "num_history_runs": 5,
    "read_chat_history": true
  },

  // 5. –ó–Ω–∞–Ω–∏—è (RAG)
  "knowledge": {
    "enabled": true,
    "type": "url", // –∏–ª–∏ "pdf"
    "urls": ["https://docs.example.com"],
    "pdf_paths": ["/path/to/docs.pdf"],
    "table_name": "knowledge"
  },
  "knowledge_filters": { "category": "technical" },
  "enable_agentic_knowledge_filters": true,
  "add_references": true,
  "references_format": "json", // –∏–ª–∏ "yaml"
  "search_knowledge": true,
  "update_knowledge": false,

  // 6. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
  "show_tool_calls": true,
  "tool_call_limit": 10,
  "tool_choice": "auto", // –∏–ª–∏ {"type": "function", "function": {"name": "search"}}
  "read_tool_call_history": true,

  // 7. –†–∞—Å—Å—É–∂–¥–µ–Ω–∏—è
  "reasoning": {
    "enabled": true,
    "model_id": "gpt-4.1-2025-04-14",
    "min_steps": 1,
    "max_steps": 10
  },

  // 8. –°–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  "introduction": "–ü—Ä–∏–≤–µ—Ç! –Ø –≤–∞—à –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç.",
  "goal": "–ü–æ–º–æ–≥–∞—Ç—å —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏",
  "additional_context": "–£—á–∏—Ç—ã–≤–∞–π —Å–ø–µ—Ü–∏—Ñ–∏–∫—É IT-—Å—Ñ–µ—Ä—ã",
  "markdown": true,
  "add_name_to_instructions": true,
  "add_datetime_to_instructions": true,
  "add_location_to_instructions": false,
  "timezone_identifier": "Europe/Moscow",
  "add_state_in_messages": true,

  // 9. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
  "add_messages": [
    { "role": "user", "content": "–ü—Ä–∏–º–µ—Ä –≤–æ–ø—Ä–æ—Å–∞" },
    { "role": "assistant", "content": "–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞" }
  ],
  "success_criteria": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏–ª –ø–æ–ª–µ–∑–Ω—ã–π –æ—Ç–≤–µ—Ç",

  // 10. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
  "user_message_role": "user",
  "create_default_user_message": true,

  // 11. –û—Ç–≤–µ—Ç—ã –∏ –ø–∞—Ä—Å–∏–Ω–≥
  "retries": 2,
  "delay_between_retries": 1,
  "exponential_backoff": true,
  "parser": {
    "enabled": true,
    "model_id": "gpt-4.1-mini-2025-04-14",
    "prompt": "–ò–∑–≤–ª–µ–∫–∏ –∫–ª—é—á–µ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é"
  },
  "parse_response": true,
  "structured_outputs": true,
  "use_json_mode": false,
  "save_response_to_file": "/tmp/responses.txt",

  // 12. –°—Ç—Ä–∏–º–∏–Ω–≥
  "stream": true,
  "stream_intermediate_steps": true,
  "store_events": true,
  "events_to_skip": ["run_response_content"],

  // 13. –ö–æ–º–∞–Ω–¥–∞
  "team": {
    "enabled": true,
    "data": { "team_name": "Support Team" }
  },
  "respond_directly": false,
  "add_transfer_instructions": true,
  "team_response_separator": "\n---\n",
  "team_session_id": "team_session_123",
  "team_id": "support_team",
  "team_session_state": { "active_agent": "analyst" },

  // 14. Workflow
  "app_id": "crm_system",
  "workflow_id": "customer_support",
  "workflow_session_id": "workflow_456",
  "workflow_session_state": { "step": "analysis" },

  // 15. –û—Ç–ª–∞–¥–∫–∞
  "debug_mode": false,
  "debug_level": 1,
  "monitoring": true,
  "telemetry": true
}
```

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤ –≤ –∫–æ–¥–µ

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ selector.py

```python
from agents.selector import get_agent

# –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
agent = get_agent(
    agent_id="smart_assistant",
    model_id="gpt-4.1-2025-04-14",
    user_id="user123",
    session_id="session_456",
    debug_mode=False
)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
response = agent.run("–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç")
```

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫—ç—à–∏—Ä—É–µ—Ç –∞–≥–µ–Ω—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ:

- `agent_id`
- `model_id`
- `user_id`
- `debug_mode`
- –•–µ—à –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (`model_config` + `agent_config`)

–ö—ç—à –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –≤ –ë–î.

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏ –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞

### 1. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∞–≥–µ–Ω—Ç–æ–≤

```sql
-- –õ–æ–≥–∏–∫–∞ –≤ selector.py
ORDER BY
    user_id = 'current_user',  -- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∞–≥–µ–Ω—Ç—ã –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–µ–µ
    user_id IS NULL            -- –ü–æ—Ç–æ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ
```

### 2. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ–ª–µ–π (–í–ê–ñ–ù–û!)

- **DB –ø–æ–ª—è** > **agent_config**: `goal`, `expected_output`, `role`
  ```python
  # –í selector.py –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:
  "goal": dynamic_agent.goal or agent_config.get("goal")
  "expected_output": dynamic_agent.expected_output or agent_config.get("expected_output")
  "role": dynamic_agent.role or agent_config.get("role")
  ```
- **agent_config** > **defaults**: –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### 3. –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å

- `user_id` = –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∞–≥–µ–Ω—Ç
- `user_id` = NULL ‚Üí –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç
- `is_public` = true ‚Üí –¥–æ—Å—Ç—É–ø–µ–Ω –≤—Å–µ–º
- `company_id` ‚Üí –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã

## üìä –ü—Ä–∏–º–µ—Ä—ã SQL –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

```sql
-- 1. –°–æ–∑–¥–∞–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
INSERT INTO tools (name, description, function_definition)
VALUES (
    'web_search',
    '–ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ',
    '{"type": "function", "function": {"name": "search_web", "description": "–ò—â–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ"}}'
);

-- 2. –°–æ–∑–¥–∞–µ–º –∞–≥–µ–Ω—Ç–∞ —Å —ç—Ç–∏–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º
INSERT INTO agents (agent_id, name, tool_ids, agent_config)
VALUES (
    'research_agent',
    '–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å',
    ARRAY[(SELECT id FROM tools WHERE name = 'web_search')],
    '{"show_tool_calls": true, "tool_call_limit": 5}'
);
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–∞

```sql
-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ agent_config (—Å–ª–∏—è–Ω–∏–µ JSON)
UPDATE agents
SET agent_config = agent_config || '{"memory": {"enabled": true}}'
WHERE agent_id = 'smart_assistant';

-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
UPDATE agents
SET tool_ids = array_append(tool_ids, (SELECT id FROM tools WHERE name = 'calculator'))
WHERE agent_id = 'math_assistant';
```

### –ü–æ–∏—Å–∫ –∞–≥–µ–Ω—Ç–æ–≤

```sql
-- –ù–∞–π—Ç–∏ –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
SELECT agent_id, name, description
FROM agents
WHERE user_id = 'user123' AND is_active = true;

-- –ù–∞–π—Ç–∏ –∞–≥–µ–Ω—Ç–æ–≤ —Å –ø–∞–º—è—Ç—å—é
SELECT agent_id, name
FROM agents
WHERE agent_config->>'memory'->>'enabled' = 'true';

-- –ù–∞–π—Ç–∏ –∞–≥–µ–Ω—Ç–æ–≤ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
SELECT a.agent_id, a.name, t.name as tool_name
FROM agents a
JOIN tools t ON t.id = ANY(a.tool_ids)
WHERE t.name = 'web_search';
```

## ‚ö° –°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

### DynamicAgentCache

```python
# –í agent_cache.py
class DynamicAgentCache:
    def get(self, agent_id, model_id, user_id, debug_mode, dynamic_agent):
        # –°–æ–∑–¥–∞–µ—Ç –∫–ª—é—á –∫—ç—à–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        config_hash = self._hash_config(dynamic_agent)
        cache_key = f"{agent_id}:{model_id}:{user_id}:{debug_mode}:{config_hash}"
        return self._cache.get(cache_key)
```

### –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞

```python
# –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∞–≥–µ–Ω—Ç–∞ –≤ –ë–î
from agents.agent_cache import agent_cache
agent_cache.invalidate_agent(agent_id)

# –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
from agents.tools_cache import tools_cache
tools_cache.invalidate()
```

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π

```python
# –í –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ Alembic
def upgrade():
    op.add_column('agents', sa.Column('new_field', sa.Text(), nullable=True))

    # –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ agent_config
    op.execute("""
        UPDATE agents
        SET agent_config = agent_config || '{"new_feature": {"enabled": false}}'
        WHERE agent_config IS NOT NULL
    """)
```

## üö® –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### 1. –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è

- `agent_id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `name` - –∏–º—è –∞–≥–µ–Ω—Ç–∞
- `model_config` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–∏
- `agent_config` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–∞

### 2. –í–∑–∞–∏–º–æ—Å–≤—è–∑–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

- **Memory** —Ç—Ä–µ–±—É–µ—Ç `user_id` –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
- **Knowledge** —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—É—é `VectorDb`
- **Tools** –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `tool_ids`
- **Storage** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–µ—Å—Å–∏–π –∏ –∏—Å—Ç–æ—Ä–∏–∏

### 3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤ —Å —É—á–µ—Ç–æ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Å TTL
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ `agent_id`, `user_id`, `is_active`

### 4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã (`user_id` != NULL)
- –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã (`company_id`)
- –í–∞–ª–∏–¥–∞—Ü–∏—è `tool_ids` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏

## üîß –ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó –ö–õ–ê–°–°–ê AGENT –ù–ê –û–°–ù–û–í–ï –ò–°–•–û–î–ù–û–ì–û –ö–û–î–ê AGNO

–ö–ª–∞—Å—Å `Agent` —Å–æ–¥–µ—Ä–∂–∏—Ç **–±–æ–ª–µ–µ 110 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**, –∫–æ—Ç–æ—Ä—ã–µ —è –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ `.venv/lib/python3.12/site-packages/agno/agent/agent.py`. –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤–∑–∞–∏–º–æ—Å–≤—è–∑–µ–π.

## 1. ü§ñ –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≥–µ–Ω—Ç–∞ (Agent Settings)

### 1.1 –ú–æ–¥–µ–ª—å –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

```python
model: Optional[Model] = None                    # –û—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å –ò–ò (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ô)
name: Optional[str] = None                       # –ò–º—è –∞–≥–µ–Ω—Ç–∞ –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
agent_id: Optional[str] = None                   # UUID –∞–≥–µ–Ω—Ç–∞ (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω)
introduction: Optional[str] = None               # –í–≤–µ–¥–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ –≤ –Ω–∞—á–∞–ª–µ –¥–∏–∞–ª–æ–≥–∞
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**

- `model` - **–¶–ï–ù–¢–†–ê–õ–¨–ù–´–ô –ö–û–ú–ü–û–ù–ï–ù–¢**, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:
  - –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å `tool_calls` (–≤—ã–∑–æ–≤–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤)
  - –ü–æ–¥–¥–µ—Ä–∂–∫—É `structured_outputs` (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤—ã–≤–æ–¥–æ–≤)
  - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ `streaming` (–ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏)
  - –õ–∏–º–∏—Ç—ã —Ç–æ–∫–µ–Ω–æ–≤ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- `agent_id` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
  - –£–Ω–∏–∫–∞–ª—å–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ —Å–∏—Å—Ç–µ–º–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
  - –°–≤—è–∑–∏ —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º (`Storage`)
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ –∏ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏
- `name` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø—Ä–∏ `add_name_to_instructions=True`
- `introduction` - –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ run'–∞

## 2. üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (User Settings)

### 2.1 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

```python
user_id: Optional[str] = None                    # ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**

- **–ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å**: –æ—Å–Ω–æ–≤–∞ –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- **–°–∏—Å—Ç–µ–º–∞ –ø–∞–º—è—Ç–∏**: –∫–ª—é—á –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ `Memory` –∏ `AgentMemory`
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–µ—Å—Å–∏–π**: –ø—Ä–µ—Ñ–∏–∫—Å –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ —Å–µ—Å—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–ª—é—á–µ–π –∫—ç—à–∞ –∞–≥–µ–Ω—Ç–æ–≤
- **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–æ–≤**: –≤ —Å–µ–ª–µ–∫—Ç–æ—Ä–µ –∞–≥–µ–Ω—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∞–≥–µ–Ω—Ç—ã –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

## 3. üìã –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Å—Å–∏–∏ (Session Settings)

### 3.1 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏

```python
session_id: Optional[str] = None                 # ID —Å–µ—Å—Å–∏–∏ (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è UUID4)
session_name: Optional[str] = None               # –ß–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–µ –∏–º—è —Å–µ—Å—Å–∏–∏
session_state: Optional[Dict[str, Any]] = None   # –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Å—Å–∏–∏ (–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ)
search_previous_sessions_history: Optional[bool] = False  # –ü–æ–∏—Å–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–µ—Å—Å–∏—è—Ö
num_history_sessions: Optional[int] = None       # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–µ—Å—Å–∏–π –¥–ª—è –ø–æ–∏—Å–∫–∞
cache_session: bool = True                       # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ —Å–µ—Å—Å–∏–∏ –≤ –ø–∞–º—è—Ç–∏
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**

- `session_state` - **–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å**:
  - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `Storage` –º–µ–∂–¥—É run'–∞–º–∏
  - –î–æ—Å—Ç—É–ø–µ–Ω –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö –ø—Ä–∏ `add_state_in_messages=True`
  - –ú–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç—Å—è/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç—Å—è –≤ JSON
- `search_previous_sessions_history` + `num_history_sessions`:
  - –í–∫–ª—é—á–∞—é—Ç –ø–æ–∏—Å–∫ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–µ—Å—Å–∏–π
  - –†–∞–±–æ—Ç–∞—é—Ç —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å `Memory` –¥–ª—è –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
  - –¢—Ä–µ–±—É—é—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—É—é `Storage` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–æ–∏—Å–∫–∞
- `cache_session` - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
  - –ü—Ä–∏ `True` —Å–µ—Å—Å–∏—è –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
  - –ü—Ä–∏ `False` –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ `Storage`

## 4. üß† –ö–æ–Ω—Ç–µ–∫—Å—Ç –∞–≥–µ–Ω—Ç–∞ (Agent Context)

### 4.1 –ö–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```python
context: Optional[Dict[str, Any]] = None         # –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–æ–º–ø—Ç–æ–≤
add_context: bool = False                        # –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
resolve_context: bool = True                     # –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**

- `context` - **—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å –¥–∞–Ω–Ω—ã—Ö**:
  - –î–æ—Å—Ç—É–ø–µ–Ω –≤–æ –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö (`tools`) –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä
  - –î–æ—Å—Ç—É–ø–µ–Ω –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ (`instructions`, `system_message`)
  - –ú–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ Python, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –∞–≥–µ–Ω—Ç
- `resolve_context` - **–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π**:
  - –ü—Ä–∏ `True`: –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `context` –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
  - –ü—Ä–∏ `False`: —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å (–¥–ª—è lazy evaluation)
- `add_context` - **–≤–∫–ª—é—á–µ–Ω–∏–µ –≤ –ø—Ä–æ–º–ø—Ç**:
  - –ü—Ä–∏ `True`: —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `context` –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ JSON –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏

## 5. üß† –ü–∞–º—è—Ç—å –∞–≥–µ–Ω—Ç–∞ (Agent Memory)

### 5.1 –°–∏—Å—Ç–µ–º–∞ –ø–∞–º—è—Ç–∏ v2 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```python
memory: Optional[Union[AgentMemory, Memory]] = None      # –û–±—ä–µ–∫—Ç –ø–∞–º—è—Ç–∏ (v1 –∏–ª–∏ v2)
enable_agentic_memory: bool = False                      # –ê–≤—Ç–æ–Ω–æ–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –∞–≥–µ–Ω—Ç–æ–º
enable_user_memories: bool = False                       # –°–æ–∑–¥–∞–Ω–∏–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
add_memory_references: Optional[bool] = None             # –°—Å—ã–ª–∫–∏ –Ω–∞ –ø–∞–º—è—Ç—å –≤ –æ—Ç–≤–µ—Ç–∞—Ö
enable_session_summaries: bool = False                   # –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–¥–æ–∫ —Å–µ—Å—Å–∏–π
add_session_summary_references: Optional[bool] = None    # –°—Å—ã–ª–∫–∏ –Ω–∞ —Å–≤–æ–¥–∫–∏ –≤ –æ—Ç–≤–µ—Ç–∞—Ö
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**

- **–î–≤–∞ —Ç–∏–ø–∞ –ø–∞–º—è—Ç–∏**:
  - `AgentMemory` (v1, legacy) - –ø—Ä–æ—Å—Ç–∞—è –ø–∞–º—è—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ
  - `Memory` (v2, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) - –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–∏—Å–∫–æ–º
- `enable_agentic_memory` - **–∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å**:
  - –ü—Ä–∏ `True`: –∞–≥–µ–Ω—Ç —Å–∞–º —Ä–µ—à–∞–µ—Ç, —á—Ç–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å/–∑–∞–±—ã—Ç—å
  - –¢—Ä–µ–±—É–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `manage_user_memories` –≤ `tools`
  - –ê–≥–µ–Ω—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–∏–∞–ª–æ–≥ –∏ —Å–æ–∑–¥–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è
- `enable_user_memories` - **—Å–æ–∑–¥–∞–Ω–∏–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π**:
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç `UserMemory` –æ–±—ä–µ–∫—Ç—ã –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ run'–∞
  - –•—Ä–∞–Ω–∏—Ç—Å—è –≤ `MemoryDb` (–æ–±—ã—á–Ω–æ PostgreSQL —Å vector extension)
  - –ò–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç—Å—è –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
- **–°–∏—Å—Ç–µ–º–∞ —Å—Å—ã–ª–æ–∫** (`add_memory_references`, `add_session_summary_references`):
  - –ü—Ä–∏ `True`: —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
  - –§–æ—Ä–º–∞—Ç –∑–∞–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `references_format` ("json" –∏–ª–∏ "yaml")
- **–ü—Ä–∏–≤—è–∑–∫–∞ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é**: –≤—Å–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è —Å–≤—è–∑–∞–Ω—ã —Å `user_id`
- **–ú–æ–¥–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `model` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏—è –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π

## 6. üìö –ò—Å—Ç–æ—Ä–∏—è –∞–≥–µ–Ω—Ç–∞ (Agent History)

### 6.1 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π

```python
add_history_to_messages: bool = False            # –î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≤ —Å–æ–æ–±—â–µ–Ω–∏—è –º–æ–¥–µ–ª–∏
num_history_responses: Optional[int] = None      # DEPRECATED: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
num_history_runs: int = 3                        # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö run'–æ–≤ –≤ –∏—Å—Ç–æ—Ä–∏–∏
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**

- `add_history_to_messages` - **–≤–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**:
  - –ü—Ä–∏ `True`: –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ —Å–ø–∏—Å–æ–∫ –¥–ª—è –º–æ–¥–µ–ª–∏
  - –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞
  - –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç—å –¥–∏–∞–ª–æ–≥–∞ –º–µ–∂–¥—É run'–∞–º–∏
- `num_history_runs` - **–≥–ª—É–±–∏–Ω–∞ –∏—Å—Ç–æ—Ä–∏–∏**:
  - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö run'–æ–≤ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è
  - –ö–∞–∂–¥—ã–π run –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π (user + assistant + tool calls)
  - –†–∞–±–æ—Ç–∞–µ—Ç —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å `Storage` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**:
  - –ò—Å—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ `add_history_to_messages=True`
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è –µ—Å–ª–∏ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç—ã –º–æ–¥–µ–ª–∏
  - –°—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —É–¥–∞–ª—è—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏ (FIFO)
- **–°–≤—è–∑—å —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏**: –æ—Ç–¥–µ–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `read_chat_history` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ–ª–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏

## 7. üìñ –ó–Ω–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–∞ (Agent Knowledge / RAG)

### 7.1 –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –∏ –ø–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

```python
knowledge: Optional[AgentKnowledge] = None               # –û–±—ä–µ–∫—Ç –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
knowledge_filters: Optional[Dict[str, Any]] = None      # –§–∏–ª—å—Ç—Ä—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –∑–Ω–∞–Ω–∏–π
enable_agentic_knowledge_filters: Optional[bool] = False # –ê–≥–µ–Ω—Ç –≤—ã–±–∏—Ä–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã —Å–∞–º
add_references: bool = False                             # –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫–∏ –≤ –æ—Ç–≤–µ—Ç
retriever: Optional[Callable] = None                     # –ö–∞—Å—Ç–æ–º–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞
references_format: Literal["json", "yaml"] = "json"     # –§–æ—Ä–º–∞—Ç —Å—Å—ã–ª–æ–∫ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**

- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã RAG —Å–∏—Å—Ç–µ–º—ã**:
  - `AgentKnowledge` - –±–∞–∑–æ–≤—ã–π –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å
  - `UrlKnowledge` - –∑–Ω–∞–Ω–∏—è –∏–∑ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü
  - `PDFKnowledge` - –∑–Ω–∞–Ω–∏—è –∏–∑ PDF –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  - `TextKnowledge` - –∑–Ω–∞–Ω–∏—è –∏–∑ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
- **–í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):
  - `PgVector` - PostgreSQL —Å pgvector extension
  - `Chroma` - –ª–æ–∫–∞–ª—å–Ω–∞—è –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î
  - `Pinecone` - –æ–±–ª–∞—á–Ω–∞—è –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î
- **Embedder –¥–ª—è –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**:
  - `OpenAIEmbedder` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç OpenAI embeddings
  - `SentenceTransformerEmbedder` - –ª–æ–∫–∞–ª—å–Ω—ã–µ embeddings
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–Ω–∞–Ω–∏–π**:
  - `knowledge_filters` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã (–∫–∞—Ç–µ–≥–æ—Ä–∏—è, –¥–∞—Ç–∞, –∞–≤—Ç–æ—Ä)
  - `enable_agentic_knowledge_filters` - –∞–≥–µ–Ω—Ç —Å–∞–º –≤—ã–±–∏—Ä–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–ø—Ä–æ—Å–∞
- **–ü–æ–∏—Å–∫ –∏ retrieval**:
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `search_knowledge` –µ—Å–ª–∏ `search_knowledge=True`
  - –ö–∞—Å—Ç–æ–º–Ω—ã–π `retriever` –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –ø–æ–∏—Å–∫–∞
  - –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –≤–µ–∫—Ç–æ—Ä–∞–º + —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ—Ç–≤–µ—Ç—ã**:
  - `add_references=True` –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ –æ—Ç–≤–µ—Ç
  - –°—Å—ã–ª–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ JSON –∏–ª–∏ YAML
  - –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç –∏—Å—Ç–æ—á–Ω–∏–∫, —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å, —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Ç–µ–∫—Å—Ç–∞

## 8. üíæ –•—Ä–∞–Ω–∏–ª–∏—â–µ –∞–≥–µ–Ω—Ç–∞ (Agent Storage)

### 8.1 –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö

```python
storage: Optional[Storage] = None                # –û–±—ä–µ–∫—Ç —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è —Å–µ—Å—Å–∏–π –∏ –∏—Å—Ç–æ—Ä–∏–∏
extra_data: Optional[Dict[str, Any]] = None      # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç–∞
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**

- **–¢–∏–ø—ã —Ö—Ä–∞–Ω–∏–ª–∏—â**:
  - `PostgresAgentStorage` - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ PostgreSQL (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ–µ–∫—Ç–µ)
  - `SqliteAgentStorage` - –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ SQLite
  - `FileAgentStorage` - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
- **–†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã** (–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏):
  - `"agent"` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
  - `"team"` - —Ä–µ–∂–∏–º –¥–ª—è –∫–æ–º–∞–Ω–¥—ã –∞–≥–µ–Ω—Ç–æ–≤ —Å –æ–±—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
  - `"workflow"` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å workflow —Å–∏—Å—Ç–µ–º–æ–π
  - `"workflow_v2"` - –Ω–æ–≤—ã–π workflow API
- **–ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è**:
  - –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π (`MessageHistory`)
  - –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Å—Å–∏–π (`session_state`)
  - –ú–µ—Ç—Ä–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (`SessionMetrics`)
  - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã run'–æ–≤ (`RunResponse`)
- `extra_data` - **–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ**:
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –∞–≥–µ–Ω—Ç–∞
  - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
  - –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## 9. üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∞–≥–µ–Ω—Ç–∞ (Agent Tools)

### 9.1 –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π

```python
tools: Optional[List[Union[Toolkit, Callable, Function, Dict]]] = None  # –°–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
show_tool_calls: bool = True                     # –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–∑–æ–≤—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ
tool_call_limit: Optional[int] = None            # –ú–∞–∫—Å–∏–º—É–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∑–∞ –æ–¥–∏–Ω run
tool_choice: Optional[Union[str, Dict[str, Any]]] = None  # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
tool_hooks: Optional[List[Callable]] = None      # Middleware –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**

- **–¢–∏–ø—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤**:
  - `Toolkit` - –Ω–∞–±–æ—Ä —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (DuckDuckGoTools, PythonTools)
  - `Function` - –æ–¥–∏–Ω–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å JSON Schema
  - `Callable` - –æ–±—ã—á–Ω–∞—è Python —Ñ—É–Ω–∫—Ü–∏—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è)
  - `Dict` - JSON Schema –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ JSON Schema**:
  - –í—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ OpenAI function calling —Ñ–æ—Ä–º–∞—Ç
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –æ–ø–∏—Å–∞–Ω–∏—è
  - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Å–ª–æ–∂–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö (Pydantic models)
- `tool_choice` - **–∫–æ–Ω—Ç—Ä–æ–ª—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**:
  - `"none"` - –∞–≥–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
  - `"auto"` - –∞–≥–µ–Ω—Ç —Ä–µ—à–∞–µ—Ç —Å–∞–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  - `{"type": "function", "function": {"name": "specific_tool"}}` - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –≤—ã–∑–æ–≤
- `tool_hooks` - **middleware –æ–±—Ä–∞–±–æ—Ç–∫–∞**:
  - –§—É–Ω–∫—Ü–∏–∏, –≤—ã–∑—ã–≤–∞–µ–º—ã–µ –¥–æ/–ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
  - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- `tool_call_limit` - **–∑–∞—â–∏—Ç–∞ –æ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è**:
  - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∑–æ–≤–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∑–∞ –æ–¥–∏–Ω run
  - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π (–º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø–∞—Å–Ω–æ)

### 9.2 –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

```python
read_chat_history: bool = False                  # –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —á—Ç–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏
search_knowledge: bool = True                    # –ü–æ–∏—Å–∫ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π (RAG)
update_knowledge: bool = False                   # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
read_tool_call_history: bool = False             # –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤—ã–∑–æ–≤–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ**:
  - –≠—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
  - –ù–µ –Ω—É–∂–Ω–æ —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –≤ `tools` —Å–ø–∏—Å–∫–µ
- `search_knowledge` - **RAG –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç**:
  - –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `knowledge` –æ–±—ä–µ–∫—Ç–∞
  - –ê–≥–µ–Ω—Ç –º–æ–∂–µ—Ç –∏—Å–∫–∞—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
  - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç
- `read_chat_history` - **–¥–æ—Å—Ç—É–ø –∫ –∏—Å—Ç–æ—Ä–∏–∏**:
  - –û—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç `add_history_to_messages`
  - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
  - –ü–æ–ª–µ–∑–µ–Ω –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –¥–∏–∞–ª–æ–≥–∞
- `update_knowledge` - **–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏–π**:
  - –ü–æ–∑–≤–æ–ª—è–µ—Ç –∞–≥–µ–Ω—Ç—É –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –±–∞–∑—É –∑–Ω–∞–Ω–∏–π
  - –¢—Ä–µ–±—É–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
  - –û–±—ã—á–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## 10. üßÆ –†–∞—Å—Å—É–∂–¥–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞ (Agent Reasoning)

### 10.1 –°–∏—Å—Ç–µ–º–∞ –ø–æ—à–∞–≥–æ–≤–æ–≥–æ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è

```python
reasoning: bool = False                          # –í–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π
reasoning_model: Optional[Model] = None          # –û—Ç–¥–µ–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π
reasoning_agent: Optional[Agent] = None          # –û—Ç–¥–µ–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç –¥–ª—è —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π
reasoning_min_steps: int = 1                     # –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤
reasoning_max_steps: int = 10                    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**

- **–†–µ–∂–∏–º —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π** - –ø–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º:
  - –ê–≥–µ–Ω—Ç —Ä–∞–∑–±–∏–≤–∞–µ—Ç —Å–ª–æ–∂–Ω—É—é –∑–∞–¥–∞—á—É –Ω–∞ –ø–æ–¥–∑–∞–¥–∞—á–∏
  - –ö–∞–∂–¥—ã–π —à–∞–≥ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
  - –ü–æ–≤—ã—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
- **–ú–æ–¥–µ–ª—å –¥–ª—è —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π**:
  - `reasoning_model` - –æ—Ç–¥–µ–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å (–º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª–µ–µ –º–æ—â–Ω–æ–π)
  - `reasoning_agent` - –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç —Å–æ —Å–≤–æ–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
  - –ï—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é `model`
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–≥–∞–º–∏**:
  - `reasoning_min_steps` - –º–∏–Ω–∏–º—É–º —à–∞–≥–æ–≤ (–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ)
  - `reasoning_max_steps` - –∑–∞—â–∏—Ç–∞ –æ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è
  - –ö–∞–∂–¥—ã–π —à–∞–≥ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `ReasoningStepEvent`
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏**:
  - –†–∞—Å—Å—É–∂–¥–µ–Ω–∏—è –º–æ–≥—É—Ç –≤–∫–ª—é—á–∞—Ç—å –≤—ã–∑–æ–≤—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
  - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–∞—Ö
  - –ü–æ–ª–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –ª–æ–≥–∏–∫–∏ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

## 11. üìù –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (System Message Settings)

### 11.1 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

```python
system_message: Optional[Union[str, Callable, Message]] = None  # –ö–∞—Å—Ç–æ–º–Ω–æ–µ —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
system_message_role: str = "system"              # –†–æ–ª—å –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
create_default_system_message: bool = True       # –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
```

### 11.2 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

```python
description: Optional[str] = None                # –û–ø–∏—Å–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ –∏ –µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
goal: Optional[str] = None                       # –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å –∏ –∑–∞–¥–∞—á–∏ –∞–≥–µ–Ω—Ç–∞
instructions: Optional[Union[str, List[str], Callable]] = None  # –î–µ—Ç–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
expected_output: Optional[str] = None            # –§–æ—Ä–º–∞—Ç –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
additional_context: Optional[str] = None         # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ä–∞–±–æ—Ç—ã
markdown: bool = False                           # –í–∫–ª—é—á–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É Markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
add_name_to_instructions: bool = False           # –î–æ–±–∞–≤–∏—Ç—å –∏–º—è –∞–≥–µ–Ω—Ç–∞ –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
add_datetime_to_instructions: bool = False       # –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è
add_location_to_instructions: bool = False       # –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ª–æ–∫–∞—Ü–∏–∏
timezone_identifier: Optional[str] = None        # –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å (TZ Database format)
add_state_in_messages: bool = False              # –í–∫–ª—é—á–∏—Ç—å session_state –≤ —Å–æ–æ–±—â–µ–Ω–∏—è
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**

- **–ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è** (–µ—Å–ª–∏ `create_default_system_message=True`):
  1. –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `description` (–æ–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ)
  2. –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è `goal` (–æ—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å)
  3. –í–∫–ª—é—á–∞—é—Ç—Å—è `instructions` (–¥–µ—Ç–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏)
  4. –£–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è `expected_output` (—Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞)
  5. –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è `additional_context` (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç)
  6. –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è (–∏–º—è, –≤—Ä–µ–º—è, –ª–æ–∫–∞—Ü–∏—è, —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
  - `add_name_to_instructions` –≤–∫–ª—é—á–∞–µ—Ç `name` –∞–≥–µ–Ω—Ç–∞
  - `add_datetime_to_instructions` –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–∫—É—â–∏–µ –¥–∞—Ç—É/–≤—Ä–µ–º—è –≤ `timezone_identifier`
  - `add_location_to_instructions` –¥–æ–±–∞–≤–ª—è–µ—Ç –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
  - `add_state_in_messages` –≤–∫–ª—é—á–∞–µ—Ç `session_state` –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**:
  - `instructions` –º–æ–∂–µ—Ç –±—ã—Ç—å —Ñ—É–Ω–∫—Ü–∏–µ–π: `def instructions(agent: Agent) -> str`
  - –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ø–æ–ª–Ω–æ–º—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∞–≥–µ–Ω—Ç–∞
  - –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **–ö–∞—Å—Ç–æ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**:
  - `system_message` –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é
  - –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π, —Ñ—É–Ω–∫—Ü–∏–µ–π –∏–ª–∏ –æ–±—ä–µ–∫—Ç–æ–º `Message`
  - –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è
- **Markdown –ø–æ–¥–¥–µ—Ä–∂–∫–∞**:
  - –ü—Ä–∏ `markdown=True` –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
  - –ê–≥–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —É–∫–∞–∑–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏, —Å–ø–∏—Å–∫–∏, –∫–æ–¥
  - –£–ª—É—á—à–∞–µ—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –¥–ª–∏–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

## 12. üí¨ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (Extra Messages)

### 12.1 Few-shot learning –∏ –ø—Ä–∏–º–µ—Ä—ã

```python
add_messages: Optional[List[Union[Dict, Message]]] = None  # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
success_criteria: Optional[str] = None           # –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**

- **Few-shot learning**:
  - `add_messages` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–º–µ—Ä—ã –¥–∏–∞–ª–æ–≥–æ–≤ (–ø–∞—Ä—ã user-assistant)
  - –î–æ–±–∞–≤–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–æ –¥–æ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ
  - –ù–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ - —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
  - –§–æ—Ä–º–∞—Ç: `[{"role": "user", "content": "..."}, {"role": "assistant", "content": "..."}]`
- **–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
  - `success_criteria` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–æ–≥–¥–∞ –∑–∞–¥–∞—á–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–ª–æ–∂–Ω—ã—Ö workflow –∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–±–æ—Ç–µ
  - –ú–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –ª–æ–≥–∏–∫—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞
- **–ü–æ—Ä—è–¥–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π**:
  1. –°–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  2. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (`add_messages`)
  3. –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ (–µ—Å–ª–∏ `add_history_to_messages=True`)
  4. –¢–µ–∫—É—â–µ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

## 13. üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è (User Message Settings)

### 13.1 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞

```python
user_message: Optional[Union[List, Dict, str, Callable, Message]] = None  # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
user_message_role: str = "user"                  # –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
create_default_user_message: bool = True         # –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**

- **–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞**:
  - `user_message` –º–æ–∂–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ, –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ –≤ `agent.run()`
  - –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤ –∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
  - –ú–æ–∂–µ—Ç –±—ã—Ç—å —Ñ—É–Ω–∫—Ü–∏–µ–π –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- **–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è** (–ø—Ä–∏ `create_default_user_message=True`):
  - –ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è:
    - –°—Å—ã–ª–∫–∏ –Ω–∞ –∑–Ω–∞–Ω–∏—è (–µ—Å–ª–∏ `add_references=True`)
    - –ö–æ–Ω—Ç–µ–∫—Å—Ç (–µ—Å–ª–∏ `add_context=True`)
    - –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Å—Å–∏–∏ (–µ—Å–ª–∏ `add_state_in_messages=True`)
    - –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ (–µ—Å–ª–∏ `add_history_to_messages=True`)
- **–†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**:
  - `user_message_role` –æ–±—ã—á–Ω–æ "user", –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∞
  - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–æ–¥–µ–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ä–æ–ª–∏

## 14. üîÑ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–≤–µ—Ç–∞ –∞–≥–µ–Ω—Ç–∞ (Agent Response Settings)

### 14.1 –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å

```python
retries: int = 0                                 # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
delay_between_retries: int = 1                   # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ (—Å–µ–∫—É–Ω–¥—ã)
exponential_backoff: bool = False                # –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏ —Å –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–æ–π
```

### 14.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –∏ –ø–∞—Ä—Å–∏–Ω–≥

```python
response_model: Optional[Type[BaseModel]] = None # Pydantic –º–æ–¥–µ–ª—å –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
parser_model: Optional[Model] = None             # –û—Ç–¥–µ–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ç–≤–µ—Ç–æ–≤
parser_model_prompt: Optional[str] = None        # –ü—Ä–æ–º–ø—Ç –¥–ª—è –º–æ–¥–µ–ª–∏-–ø–∞—Ä—Å–µ—Ä–∞
parse_response: bool = True                      # –ü–∞—Ä—Å–∏—Ç—å –æ—Ç–≤–µ—Ç –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
structured_outputs: Optional[bool] = None        # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—Ç–∏–≤–Ω—ã–µ structured outputs
use_json_mode: bool = False                      # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π JSON —Ä–µ–∂–∏–º
save_response_to_file: Optional[str] = None      # –ü—É—Ç—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**

- **–°–∏—Å—Ç–µ–º–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫**:
  - –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API, rate limits, network issues
  - `exponential_backoff`: –∑–∞–¥–µ—Ä–∂–∫–∞ —É–¥–≤–∞–∏–≤–∞–µ—Ç—Å—è —Å –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–æ–π
  - –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ –∫–∞–∂–¥–æ–º—É –≤—ã–∑–æ–≤—É –º–æ–¥–µ–ª–∏ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ run'–∞
- **Structured Outputs** - —Ç—Ä–∏ —Ä–µ–∂–∏–º–∞:
  1. **–ù–∞—Ç–∏–≤–Ω—ã–µ** (`structured_outputs=True`): OpenAI JSON Schema —Ä–µ–∂–∏–º
  2. **–ü–∞—Ä—Å–µ—Ä** (`parser_model`): –æ—Ç–¥–µ–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –ø–∞—Ä—Å–∏—Ç —Å–≤–æ–±–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç
  3. **JSON —Ä–µ–∂–∏–º** (`use_json_mode=True`): –º–æ–¥–µ–ª—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç JSON, –Ω–æ –±–µ–∑ —Å—Ö–µ–º—ã
- **Response Model –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**:
  - `response_model` - Pydantic –∫–ª–∞—Å—Å, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–≤–µ—Ç–∞
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JSON Schema –¥–ª—è –º–æ–¥–µ–ª–∏
  - –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–∞–∫ –æ–±—ä–µ–∫—Ç Pydantic (–µ—Å–ª–∏ `parse_response=True`)
- **Fallback –ª–æ–≥–∏–∫–∞**:
  - –ï—Å–ª–∏ –º–æ–¥–µ–ª—å –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç structured outputs, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `parser_model`
  - –ï—Å–ª–∏ `parser_model` –Ω–µ –∑–∞–¥–∞–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å —Å JSON –ø—Ä–æ–º–ø—Ç–æ–º
  - –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤**:
  - `save_response_to_file` –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ –æ—Ç–≤–µ—Ç—ã –≤ —Ñ–∞–π–ª
  - –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞

## 15. üì° –ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ (Agent Streaming)

### 15.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞

```python
stream: Optional[bool] = None                    # –ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –æ—Ç–≤–µ—Ç–∞
stream_intermediate_steps: bool = False          # –°—Ç—Ä–∏–º–∏–Ω–≥ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —à–∞–≥–æ–≤
store_events: bool = False                       # –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–æ–±—ã—Ç–∏—è –≤ –ø–∞–º—è—Ç–∏
events_to_skip: Optional[List[RunEvent]] = None  # –°–æ–±—ã—Ç–∏—è –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ –ø—Ä–∏ —Å—Ç—Ä–∏–º–∏–Ω–≥–µ
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**

- **–°—Ç—Ä–∏–º–∏–Ω–≥ –æ—Ç–≤–µ—Ç–æ–≤**:
  - `stream=True` –≤–∫–ª—é—á–∞–µ—Ç –ø–æ—Ç–æ–∫–æ–≤—É—é –ø–µ—Ä–µ–¥–∞—á—É —Ç–æ–∫–µ–Ω–æ–≤ –æ—Ç –º–æ–¥–µ–ª–∏
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Iterator[RunResponseEvent]` –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
  - –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
  - –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞ –º–æ–¥–µ–ª—å—é (OpenAI –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç)
- **–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —à–∞–≥–∏**:
  - `stream_intermediate_steps=True` —Å—Ç—Ä–∏–º–∏—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
  - –í–∫–ª—é—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –≤—ã–∑–æ–≤–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π, –ø–∞—Ä—Å–∏–Ω–≥–∞
  - –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø–æ–∫–∞–∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏**:
  - `store_events` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ª–∏ —Å–æ–±—ã—Ç–∏—è –≤ `RunResponse.events`
  - `events_to_skip` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π
  - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è `RunEvent.run_response_content` –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏
- **–¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π**:
  - `RunResponseStartedEvent` - –Ω–∞—á–∞–ª–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞
  - `RunResponseContentEvent` - —Ç–æ–∫–µ–Ω—ã –æ—Ç–≤–µ—Ç–∞
  - `ToolCallStartedEvent` / `ToolCallCompletedEvent` - –≤—ã–∑–æ–≤—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
  - `ReasoningStepEvent` - —à–∞–≥–∏ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π
  - `RunResponseCompletedEvent` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞

## 16. üë• –ö–æ–º–∞–Ω–¥–∞ –∞–≥–µ–Ω—Ç–æ–≤ (Agent Team)

### 16.1 –ö–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è

```python
team: Optional[List[Agent]] = None               # –ö–æ–º–∞–Ω–¥–∞ –∞–≥–µ–Ω—Ç–æ–≤ –ø–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
team_data: Optional[Dict[str, Any]] = None       # –û–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
role: Optional[str] = None                       # –†–æ–ª—å –≤ –∫–æ–º–∞–Ω–¥–µ (–µ—Å–ª–∏ –∞–≥–µ–Ω—Ç - —á–ª–µ–Ω)
respond_directly: bool = False                   # –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
add_transfer_instructions: bool = True           # –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –∑–∞–¥–∞—á
team_response_separator: str = "\n"              # –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç –∫–æ–º–∞–Ω–¥—ã
team_session_id: Optional[str] = None            # ID —Å–µ—Å—Å–∏–∏ –∫–æ–º–∞–Ω–¥—ã
team_id: Optional[str] = None                    # ID –∫–æ–º–∞–Ω–¥—ã (–µ—Å–ª–∏ –∞–≥–µ–Ω—Ç - —á–ª–µ–Ω)
team_session_state: Optional[Dict[str, Any]] = None  # –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –∫–æ–º–∞–Ω–¥—ã
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**

- **–ò–µ—Ä–∞—Ä—Ö–∏—è –∞–≥–µ–Ω—Ç–æ–≤**:
  - –ê–≥–µ–Ω—Ç —Å `team` - **–ª–∏–¥–µ—Ä –∫–æ–º–∞–Ω–¥—ã**, —É–ø—Ä–∞–≤–ª—è–µ—Ç –¥—Ä—É–≥–∏–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏
  - –ê–≥–µ–Ω—Ç —Å `team_id` - **—á–ª–µ–Ω –∫–æ–º–∞–Ω–¥—ã**, –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –∑–∞–¥–∞—á–∏ –æ—Ç –ª–∏–¥–µ—Ä–∞
  - `role` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —á–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥—ã
- **–ü–µ—Ä–µ–¥–∞—á–∞ –∑–∞–¥–∞—á**:
  - –õ–∏–¥–µ—Ä –º–æ–∂–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–æ–¥–∑–∞–¥–∞—á–∏ —á–ª–µ–Ω–∞–º –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
  - `add_transfer_instructions=True` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø–µ—Ä–µ–¥–∞—á–µ
  - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –ª–∏–¥–µ—Ä–∞
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º**:
  - `team_session_state` - –æ–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –≤—Å–µ–π –∫–æ–º–∞–Ω–¥—ã
  - `team_session_id` - —Å–≤—è–∑—ã–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö —á–ª–µ–Ω–æ–≤ –∫–æ–º–∞–Ω–¥—ã
  - –û—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ `session_state` –∫–∞–∂–¥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
- **–†–µ–∂–∏–º—ã –æ—Ç–≤–µ—Ç–∞**:
  - `respond_directly=False` - —á–ª–µ–Ω –∫–æ–º–∞–Ω–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ª–∏–¥–µ—Ä—É
  - `respond_directly=True` - —á–ª–µ–Ω –∫–æ–º–∞–Ω–¥—ã –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  - `team_response_separator` —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- **–û–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ**:
  - `team_data` –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º —á–ª–µ–Ω–∞–º –∫–æ–º–∞–Ω–¥—ã
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏

## 17. üîß –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ Workflow

### 17.1 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

```python
app_id: Optional[str] = None                     # ID –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
workflow_id: Optional[str] = None                # ID workflow –ø—Ä–æ—Ü–µ—Å—Å–∞
workflow_session_id: Optional[str] = None        # ID —Å–µ—Å—Å–∏–∏ workflow
workflow_session_state: Optional[Dict[str, Any]] = None  # –°–æ—Å—Ç–æ—è–Ω–∏–µ workflow
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**

- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏**:
  - `app_id` —Å–≤—è–∑—ã–≤–∞–µ—Ç –∞–≥–µ–Ω—Ç–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
  - –í–ª–∏—è–µ—Ç –Ω–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Workflow —Å–∏—Å—Ç–µ–º—ã**:
  - `workflow_id` –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å
  - `workflow_session_id` –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
  - `workflow_session_state` —Ö—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**:
  - –ê–≥–µ–Ω—Ç –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:
    - –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (`session_state`)
    - –ö–æ–º–∞–Ω–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (`team_session_state`)
    - Workflow —Å–æ—Å—Ç–æ—è–Ω–∏–µ (`workflow_session_state`)
  - –ö–∞–∂–¥–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ

## 18. üêõ –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Debug & Monitoring)

### 18.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–ª–∞–¥–∫–∏ –∏ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏

```python
debug_mode: bool = False                         # –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ (–¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏)
debug_level: Literal[1, 2] = 1                   # –£—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç–ª–∞–¥–∫–∏
monitoring: bool = False                         # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ agno.com
telemetry: bool = True                           # –ê–Ω–æ–Ω–∏–º–Ω–∞—è —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**

- **–°–∏—Å—Ç–µ–º–∞ –æ—Ç–ª–∞–¥–∫–∏**:
  - `debug_mode=True` –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
  - `debug_level=1` - –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–≤—ã–∑–æ–≤—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)
  - `debug_level=2` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–ø—Ä–æ–º–ø—Ç—ã, –æ—Ç–≤–µ—Ç—ã –º–æ–¥–µ–ª–∏, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
  - –õ–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Python logging
- **–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è**:
  - `AGNO_DEBUG=true` –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `debug_mode`
  - `AGNO_MONITOR=true` –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `monitoring`
  - `AGNO_TELEMETRY=false` –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `telemetry`
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**:
  - `monitoring=True` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É agno.com
  - –í–∫–ª—é—á–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
  - –¢—Ä–µ–±—É–µ—Ç API –∫–ª—é—á agno.com –¥–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- **–¢–µ–ª–µ–º–µ—Ç—Ä–∏—è**:
  - –ê–Ω–æ–Ω–∏–º–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞
  - –ù–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–π
  - –ü–æ–º–æ–≥–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º Agno —É–ª—É—á—à–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π

### OpenAI Chat Model (–û—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å –≤ –ø—Ä–æ–µ–∫—Ç–µ)

```python
# –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
id: str = "gpt-4o"                               # ID –º–æ–¥–µ–ª–∏
temperature: Optional[float] = None              # –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (–∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å)
max_tokens: Optional[int] = None                 # –ú–∞–∫—Å–∏–º—É–º —Ç–æ–∫–µ–Ω–æ–≤
max_completion_tokens: Optional[int] = None      # –ú–∞–∫—Å–∏–º—É–º —Ç–æ–∫–µ–Ω–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
top_p: Optional[float] = None                    # Top-p —Å—ç–º–ø–ª–∏–Ω–≥
frequency_penalty: Optional[float] = None        # –®—Ç—Ä–∞—Ñ –∑–∞ —á–∞—Å—Ç–æ—Ç—É
presence_penalty: Optional[float] = None         # –®—Ç—Ä–∞—Ñ –∑–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ
seed: Optional[int] = None                       # –°–µ–º—è –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏
stop: Optional[Union[str, List[str]]] = None     # –°—Ç–æ–ø-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

# –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
reasoning_effort: Optional[str] = None           # –£—Å–∏–ª–∏–µ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è
store: Optional[bool] = None                     # –•—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
metadata: Optional[Dict[str, Any]] = None        # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
modalities: Optional[List[str]] = None           # –ú–æ–¥–∞–ª—å–Ω–æ—Å—Ç–∏ (text, audio)
audio: Optional[Dict[str, Any]] = None           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—É–¥–∏–æ

# –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
api_key: Optional[str] = None                    # API –∫–ª—é—á
organization: Optional[str] = None               # –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
base_url: Optional[Union[str, httpx.URL]] = None # –ë–∞–∑–æ–≤—ã–π URL
timeout: Optional[float] = None                  # –¢–∞–π–º–∞—É—Ç
max_retries: Optional[int] = None                # –ú–∞–∫—Å–∏–º—É–º –ø–æ–≤—Ç–æ—Ä–æ–≤
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤ –≤ –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ

### –ú–æ–¥–µ–ª—å DynamicAgent (PostgreSQL)

```python
class DynamicAgent(Base):
    id = Column(UUID, primary_key=True)
    agent_id = Column(String(255), unique=True, nullable=False)
    name = Column(String(255), nullable=False)
    description = Column(Text)

    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    model_config = Column(JSONB, default={"provider": "openai", "id": "gpt-4.1-mini-2025-04-14"})
    system_instructions = Column(ARRAY(Text), default=[])
    tool_ids = Column(ARRAY(UUID), default=[])
    agent_config = Column(JSONB, default={})

    # –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å
    is_public = Column(Boolean, default=False)
    company_id = Column(UUID, nullable=True)
    user_id = Column(String(255), nullable=True)

    # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
    photo = Column(Text, nullable=True)
    category = Column(Text, nullable=True)
    is_active = Column(Boolean, default=True)
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ agent_config

```json
{
  "storage": {
    "table_name": "sessions"
  },
  "memory": {
    "enabled": true,
    "table_name": "user_memories",
    "delete_memories": true,
    "clear_memories": true
  },
  "history": {
    "add_history_to_messages": true,
    "num_history_runs": 3,
    "read_chat_history": true
  },
  "enable_agentic_memory": true,
  "add_state_in_messages": true,
  "markdown": true,
  "add_datetime_to_instructions": true,
  "debug_mode": false
}
```

## –ö–ª—é—á–µ–≤—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

### 1. –ú–æ–¥–µ–ª—å –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- `model` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (tool_calls, structured_outputs, streaming)
- `reasoning_model` –∏ `parser_model` –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–Ω—ã–º–∏ –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
- OpenAI –º–æ–¥–µ–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –Ω–∞—Ç–∏–≤–Ω—ã–µ structured outputs

### 2. –ü–∞–º—è—Ç—å –∏ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

- `memory` + `user_id` + `session_id` –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –ø–∞–º—è—Ç—å
- `storage` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Å—Å–∏–π
- `enable_agentic_memory` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≥–µ–Ω—Ç—É —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–∞–º—è—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω–æ

### 3. –ó–Ω–∞–Ω–∏—è –∏ –ø–æ–∏—Å–∫ (RAG)

- `knowledge` + `VectorDb` + `Embedder` –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç RAG
- `search_knowledge=True` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–∏—Å–∫–∞
- `retriever` –º–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–∏—Å–∫

### 4. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏

- `tools` –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ JSON Schema –¥–ª—è –º–æ–¥–µ–ª–∏
- `tool_choice` —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–±–æ—Ä–æ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- `tool_hooks` –ø–æ–∑–≤–æ–ª—è—é—Ç middleware –æ–±—Ä–∞–±–æ—Ç–∫—É
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ, MCP –∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### 5. –°–æ–æ–±—â–µ–Ω–∏—è –∏ –ø—Ä–æ–º–ø—Ç—ã

- `system_message` —Å—Ç—Ä–æ–∏—Ç—Å—è –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- `add_history_to_messages` + `num_history_runs` –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç –∏—Å—Ç–æ—Ä–∏—é
- `add_references` –¥–æ–±–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –∑–Ω–∞–Ω–∏–π

### 6. –ö–æ–º–∞–Ω–¥—ã –∏ workflow

- `team` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≥–µ–Ω—Ç–∞–º —Å–æ—Ç—Ä—É–¥–Ω–∏—á–∞—Ç—å
- `workflow_*` –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é—Ç —Å workflow —Å–∏—Å—Ç–µ–º–∞–º–∏
- `respond_directly` –∏–∑–º–µ–Ω—è–µ—Ç –ø–æ—Ç–æ–∫ –æ—Ç–≤–µ—Ç–æ–≤ –≤ –∫–æ–º–∞–Ω–¥–µ

### 7. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –í –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `DynamicAgentCache` —Å —É—á–µ—Ç–æ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- –ö—ç—à —É—á–∏—Ç—ã–≤–∞–µ—Ç `agent_id`, `model_id`, `user_id`, `debug_mode` –∏ —Ö–µ—à –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞–≥–µ–Ω—Ç—ã –Ω–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è

## –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

### –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```python
agent = Agent(
    name="BasicAgent",
    model=OpenAIChat(id="gpt-4.1-mini-2025-04-14"),
    description="–ë–∞–∑–æ–≤—ã–π –∞–≥–µ–Ω—Ç",
    instructions="–¢—ã –ø–æ–ª–µ–∑–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç",
    debug_mode=True
)
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –ø–∞–º—è—Ç—å—é –∏ –∑–Ω–∞–Ω–∏—è–º–∏

```python
agent = Agent(
    name="SmartAgent",
    model=OpenAIChat(id="gpt-4.1-mini-2025-04-14"),
    # –ü–∞–º—è—Ç—å
    memory=Memory(
        model=OpenAIChat(id="gpt-4.1-mini-2025-04-14"),
        db=PostgresMemoryDb(db_url="postgresql://...", table_name="user_memories")
    ),
    enable_agentic_memory=True,
    # –ó–Ω–∞–Ω–∏—è
    knowledge=UrlKnowledge(
        urls=["https://example.com"],
        vector_db=PgVector(db_url="postgresql://...", table_name="knowledge")
    ),
    search_knowledge=True,
    # –ò—Å—Ç–æ—Ä–∏—è
    add_history_to_messages=True,
    num_history_runs=3,
    # –•—Ä–∞–Ω–∏–ª–∏—â–µ
    storage=PostgresAgentStorage(
        db_url="postgresql://...",
        table_name="sessions"
    )
)
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –∏ –∫–æ–º–∞–Ω–¥–æ–π

```python
agent = Agent(
    name="TeamLeader",
    model=OpenAIChat(id="gpt-4.1-2025-04-14"),
    tools=[DuckDuckGoTools(), PythonTools()],
    team=[web_agent, finance_agent],
    show_tool_calls=True,
    tool_call_limit=10,
    add_transfer_instructions=True
)
```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –ì–∏–±—Ä–∏–¥–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞–≥–µ–Ω—Ç—ã**: Hardcoded –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∞–≥–µ–Ω—Ç—ã**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ —á–µ—Ä–µ–∑ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

### 2. –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `company_id` –∏ `user_id`
- –ü—É–±–ª–∏—á–Ω—ã–µ –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤ –Ω–∞–¥ –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏

### 3. –°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

- –ö—ç—à —É—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤
- –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 4. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

- **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ**: DuckDuckGo, Python, File operations
- **MCP**: Model Context Protocol –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- **–ö–∞—Å—Ç–æ–º–Ω—ã–µ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 5. –ï–¥–∏–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- –û–±—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è sessions, user_memories
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π Alembic

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤ Agno –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≥–∏–±–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ò–ò-–∞–≥–µ–Ω—Ç–æ–≤. –ù–∞ –æ—Å–Ω–æ–≤–µ –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –≤—ã—è–≤–ª–µ–Ω—ã –∫–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:

## üéØ –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã –∏–∑ –∞–Ω–∞–ª–∏–∑–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞

### 1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å** - 110+ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ 18 –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö:

- **–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: –º–æ–¥–µ–ª—å, –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- **–°–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç**: —Å–µ—Å—Å–∏–∏, –∫–æ–Ω—Ç–µ–∫—Å—Ç, –ø–∞–º—è—Ç—å (v1 –∏ v2)
- **–ó–Ω–∞–Ω–∏—è –∏ –ø–æ–∏—Å–∫**: RAG —Å–∏—Å—Ç–µ–º–∞ —Å –≤–µ–∫—Ç–æ—Ä–Ω—ã–º–∏ –±–∞–∑–∞–º–∏
- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã**: –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ, MCP, –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ**: —Å–∏—Å—Ç–µ–º–Ω—ã–µ/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, few-shot learning
- **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**: —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è, –∫–æ–º–∞–Ω–¥—ã, workflow, —Å—Ç—Ä–∏–º–∏–Ω–≥

### 2. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏**:

- `model` - —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- `user_id` + `session_id` - –æ—Å–Ω–æ–≤–∞ –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
- `memory` + `knowledge` + `storage` - —Ç—Ä–∏–∞–¥–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- `tools` + `tool_choice` + `tool_hooks` - —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç–∏

### 3. **–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤** (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞):

- **DB –ø–æ–ª—è > agent_config**: `goal`, `expected_output`, `role` –≤ —Ç–∞–±–ª–∏—Ü–µ –∞–≥–µ–Ω—Ç–æ–≤
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ > –≥–ª–æ–±–∞–ª—å–Ω—ã–µ**: –∞–≥–µ–Ω—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–µ–µ –ø—É–±–ª–∏—á–Ω—ã—Ö
- **Explicit > implicit**: —è–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ

### 4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**:

- –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–∞–≥–µ–Ω—Ç—ã, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, —Å–µ—Å—Å–∏–∏)
- Lazy loading –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–ø–∞–º—è—Ç—å, –∑–Ω–∞–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é)
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—Ä–µ–∑–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏)
- –ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–ª—è UX –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### 5. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∏–∑–æ–ª—è—Ü–∏—è**:

- –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–∞–Ω–Ω—ã—Ö (`user_id`, `company_id`)
- –ò–∑–æ–ª—è—Ü–∏—è —Å–µ—Å—Å–∏–π –∏ –ø–∞–º—è—Ç–∏ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º (`tool_choice`, –ª–∏–º–∏—Ç—ã)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö

## üöÄ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞

### –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤:

1. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –Ω–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ `DynamicAgentCache` –∫—Ä–∏—Ç–∏—á–Ω–∞
2. **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ memory v2** –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ - –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç UX
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ RAG** –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–Ω–∞–Ω–∏–π - `knowledge` + `search_knowledge`
4. **–ü—Ä–∏–º–µ–Ω—è–π—Ç–µ structured outputs** –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ - `response_model` + `structured_outputs`
5. **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã** –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á - `team` + `role` + –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è

### –î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

1. **–ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∏—Å—Ç–æ—Ä–∏—é** - `num_history_runs` –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–æ–∫–µ–Ω—ã
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä–∏–º–∏–Ω–≥** –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ - `stream` + `stream_intermediate_steps`
3. **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ retry –ª–æ–≥–∏–∫—É** - `retries` + `exponential_backoff`
4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** - `tool_call_limit` + `tool_hooks`

### –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

1. **–í–∫–ª—é—á–∏—Ç–µ debug —Ä–µ–∂–∏–º** –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ - `debug_mode` + `debug_level`
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ events** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ - `store_events` + –∞–Ω–∞–ª–∏–∑ `RunResponseEvent`
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é** –¥–ª—è Production - `monitoring` + `telemetry`

## üöÄ –ù–û–í–´–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò –î–ò–ù–ê–ú–ò–ß–ï–°–ö–ò–• –ê–ì–ï–ù–¢–û–í (2025-01-27)

### üéØ –î–æ—Å—Ç–∏–≥–Ω—É—Ç–∞ 100% —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Agno Framework

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã **—Ç—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã**, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –ø–æ–ª–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –≤—Å–µ—Ö 110+ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ Agno –≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∞–≥–µ–Ω—Ç–∞—Ö:

## 1. ü™ù Tool Hooks - Middleware –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

### –ß—Ç–æ —ç—Ç–æ —Ä–µ—à–∞–µ—Ç:

- ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞**: –ü–∞—Ä–∞–º–µ—Ç—Ä `tool_hooks` –æ–∂–∏–¥–∞–µ—Ç —Å–ø–∏—Å–æ–∫ Python —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ JSON
- ‚úÖ **–†–µ—à–µ–Ω–∏–µ**: –†–µ–µ—Å—Ç—Ä hook'–æ–≤ –ø–æ –∏–º–µ–Ω–∞–º + –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã:

```python
# agents/tool_hooks.py - –†–µ–µ—Å—Ç—Ä middleware —Ñ—É–Ω–∫—Ü–∏–π
TOOL_HOOKS_REGISTRY = {
    "logging": logging_hook,                    # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–∑–æ–≤–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
    "rate_limiting": rate_limiting_hook(30),    # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã (30/–º–∏–Ω)
    "validation": validation_hook,              # –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    "cache_5min": caching_hook(300),           # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (5 –º–∏–Ω)
    "metrics": metrics_hook,                   # –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    "error_recovery": error_recovery_hook      # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—à–∏–±–æ–∫
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∞–≥–µ–Ω—Ç–∞—Ö:

```sql
-- –í agent_config –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∏–º–µ–Ω–∞ hook'–æ–≤
INSERT INTO agents (agent_id, agent_config) VALUES (
    'production_assistant',
    '{
        "tool_hooks": ["logging", "validation", "rate_limiting", "metrics"],
        "show_tool_calls": true,
        "tool_call_limit": 15
    }'
);
```

### API —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

- `GET /v1/agents/tool-hooks` - —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö hook'–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤ `agents/selector.py` —á–µ—Ä–µ–∑ `get_tool_hooks()`

## 2. üìã Response Models - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã

### –ß—Ç–æ —ç—Ç–æ —Ä–µ—à–∞–µ—Ç:

- ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞**: –ü–∞—Ä–∞–º–µ—Ç—Ä `response_model` –æ–∂–∏–¥–∞–µ—Ç Pydantic –∫–ª–∞—Å—Å, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —á–µ—Ä–µ–∑ JSON
- ‚úÖ **–†–µ—à–µ–Ω–∏–µ**: –†–µ–µ—Å—Ç—Ä Pydantic –º–æ–¥–µ–ª–µ–π –ø–æ –∏–º–µ–Ω–∞–º + –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã:

```python
# agents/response_models.py - –†–µ–µ—Å—Ç—Ä Pydantic –º–æ–¥–µ–ª–µ–π
RESPONSE_MODELS_REGISTRY = {
    "TaskResult": TaskResult,           # –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏
    "UserAnalysis": UserAnalysis,       # –ê–Ω–∞–ª–∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    "SearchResult": SearchResult,       # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞
    "DocumentSummary": DocumentSummary, # –†–µ–∑—é–º–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    "FinancialAnalysis": FinancialAnalysis, # –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑
    "CodeAnalysis": CodeAnalysis,       # –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
    "TranslationResult": TranslationResult, # –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–µ—Ä–µ–≤–æ–¥–∞
    "QuestionAnswer": QuestionAnswer,   # –í–æ–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç
    "EmailDraft": EmailDraft           # –ß–µ—Ä–Ω–æ–≤–∏–∫ –ø–∏—Å—å–º–∞
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∞–≥–µ–Ω—Ç–∞—Ö:

```sql
-- –í agent_config —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–º—è –º–æ–¥–µ–ª–∏
INSERT INTO agents (agent_id, agent_config) VALUES (
    'structured_assistant',
    '{
        "response_model": "TaskResult",
        "structured_outputs": true,
        "parse_response": true,
        "markdown": false
    }'
);
```

### API —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

- `GET /v1/agents/response-models` - —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
- `GET /v1/agents/response-models/{model_name}/schema` - JSON Schema –º–æ–¥–µ–ª–∏

## 3. üë• Team Agents - –ö–æ–º–∞–Ω–¥—ã –∞–≥–µ–Ω—Ç–æ–≤

### –ß—Ç–æ —ç—Ç–æ —Ä–µ—à–∞–µ—Ç:

- ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞**: –ü–∞—Ä–∞–º–µ—Ç—Ä `team` –æ–∂–∏–¥–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ Agent, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–ª—å–∑—è —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å
- ‚úÖ **–†–µ—à–µ–Ω–∏–µ**: –°—Å—ã–ª–∫–∏ –ø–æ `agent_id` + –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ + –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã:

```python
# agents/team_manager.py - –ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–º–∞–Ω–¥ –∞–≥–µ–Ω—Ç–æ–≤
class TeamManager:
    def build_team(self, team_config: List[str], user_id, debug_mode) -> List[Agent]:
        # –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∞–≥–µ–Ω—Ç–æ–≤ –ø–æ agent_id –∏ –∫—ç—à–∏—Ä—É–µ—Ç –∫–æ–º–∞–Ω–¥—É
        # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é –∫—ç—à–∞
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∞–≥–µ–Ω—Ç–∞—Ö:

```sql
-- –í agent_config —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è agent_id —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–æ–º–∞–Ω–¥—ã
INSERT INTO agents (agent_id, agent_config) VALUES (
    'research_team_leader',
    '{
        "team": ["web_agent", "finance_agent", "agno_assist"],
        "team_data": {"project": "market_analysis"},
        "add_transfer_instructions": true,
        "team_response_separator": "\n---\n"
    }'
);
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º:

- –ö–æ–º–∞–Ω–¥—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –ø–æ —Å–æ—Å—Ç–∞–≤—É —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —á–µ—Ä–µ–∑ PostgreSQL LISTEN/NOTIFY
- API —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—ç—à–µ–º –∫–æ–º–∞–Ω–¥

### API —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

- `GET /v1/agents/teams/cache-stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞ –∫–æ–º–∞–Ω–¥
- `DELETE /v1/agents/teams/cache` - –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –∫–æ–º–∞–Ω–¥

## üìä –ü—Ä–∏–º–µ—Ä—ã —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ `8fbe5808c235` —Å–æ–∑–¥–∞–Ω—ã –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã:

### 1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç** (`task_manager`)

```json
{
  "response_model": "TaskResult",
  "structured_outputs": true,
  "parse_response": true,
  "markdown": false
}
```

### 2. **Production –∞–≥–µ–Ω—Ç** (`production_assistant`)

```json
{
  "tool_hooks": [
    "logging",
    "validation",
    "rate_limiting",
    "metrics",
    "error_recovery"
  ],
  "tool_call_limit": 15,
  "show_tool_calls": true,
  "debug_mode": false
}
```

### 3. **–õ–∏–¥–µ—Ä –∫–æ–º–∞–Ω–¥—ã** (`research_team_leader`)

```json
{
  "team": ["web_agent", "finance_agent", "agno_assist"],
  "team_data": { "project": "market_analysis" },
  "add_transfer_instructions": true,
  "team_response_separator": "\n---\n"
}
```

### 4. **–£–ª—å—Ç–∏–º–∞—Ç–∏–≤–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç** (`ultimate_assistant`)

```json
{
  "response_model": "UserAnalysis",
  "structured_outputs": true,
  "tool_hooks": ["logging", "cache_5min", "validation"],
  "team": ["web_agent", "finance_agent"],
  "memory": { "enabled": true, "table_name": "user_memories" },
  "knowledge": {
    "enabled": true,
    "type": "url",
    "urls": ["https://docs.agno.com"]
  },
  "debug_mode": true
}
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `agents/selector.py`:

```python
def _create_agent_from_db(dynamic_agent, model_id, user_id, session_id, debug_mode, db):
    # 1. Tool Hooks - –∑–∞–≥—Ä—É–∑–∫–∞ middleware –ø–æ –∏–º–µ–Ω–∞–º
    tool_hooks_config = agent_config.get("tool_hooks")
    tool_hooks = _get_tool_hooks_from_config(tool_hooks_config)

    # 2. Response Models - –∑–∞–≥—Ä—É–∑–∫–∞ Pydantic –º–æ–¥–µ–ª–µ–π –ø–æ –∏–º–µ–Ω–∞–º
    response_model_config = agent_config.get("response_model")
    response_model = _get_response_model_from_config(response_model_config)

    # 3. Team Agents - –∑–∞–≥—Ä—É–∑–∫–∞ –∞–≥–µ–Ω—Ç–æ–≤ –ø–æ agent_id —á–µ—Ä–µ–∑ TeamManager
    team_config = agent_config.get("team")
    team_agents = _get_team_from_config(team_config, db, user_id, debug_mode)

    # –°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ Agno Agent —Å–æ –≤—Å–µ–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏
    return Agent(
        tool_hooks=tool_hooks,
        response_model=response_model,
        team=team_agents,
        # ... –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ 110+ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    )
```

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

- **–ê–≥–µ–Ω—Ç—ã**: –ö—ç—à —É—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —Ö–µ—à–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **–ö–æ–º–∞–Ω–¥—ã**: –û—Ç–¥–µ–ª—å–Ω—ã–π –∫—ç—à –∫–æ–º–∞–Ω–¥ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- **Hook'–∏ –∏ –º–æ–¥–µ–ª–∏**: –†–µ–µ—Å—Ç—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è:

- –í—Å–µ hook'–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–∞ —ç—Ç–∞–ø–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- Pydantic –º–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–≤–µ—Ç–æ–≤
- –ö–æ–º–∞–Ω–¥—ã –∞–≥–µ–Ω—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

## üéâ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è

### ‚úÖ **100% —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Agno Framework**

–í—Å–µ 110+ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∞–≥–µ–Ω—Ç–∞—Ö –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π.

### ‚úÖ **–≠–ª–µ–≥–∞–Ω—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**

–†–µ—à–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–µ "Registry" - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º –ø–æ–¥—Ö–æ–¥–µ –¥–ª—è –ø–æ–¥–æ–±–Ω—ã—Ö –∑–∞–¥–∞—á.

### ‚úÖ **Production-ready –∫–∞—á–µ—Å—Ç–≤–æ**

- –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Agno
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ fallback'–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–µ–π

### ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**

–í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∞–≥–µ–Ω—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

### ‚úÖ **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**

–ù–æ–≤—ã–µ hook'–∏ –∏ –º–æ–¥–µ–ª–∏ –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤ —Ä–µ–µ—Å—Ç—Ä–∞—Ö.

## üìä –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ –ø–æ–ª–Ω–æ—Ç—ã –∞–Ω–∞–ª–∏–∑–∞

**–û—Ö–≤–∞—Ç –∞–Ω–∞–ª–∏–∑–∞**: ‚úÖ 100% - –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –í–°–ï –ø–∞—Ä–∞–º–µ—Ç—Ä—ã + —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ  
**–ì–ª—É–±–∏–Ω–∞ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–µ–π**: ‚úÖ –ü–æ–ª–Ω–∞—è - –æ–ø–∏—Å–∞–Ω—ã –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏  
**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å**: ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è - –¥–∞–Ω—ã –ø—Ä–∏–º–µ—Ä—ã + —Ä–∞–±–æ—á–∏–π –∫–æ–¥  
**–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å**: ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–µ—Ä—Å–∏–∏ Agno + –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ Production**: ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ + –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ + —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ

–î–∞–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–µ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–∏—Ä–æ–¥—ã –∞–≥–µ–Ω—Ç–æ–≤ Agno –∏ —Å–ª—É–∂–∏—Ç –ø–æ–ª–Ω—ã–º —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ò–ò-—Å–∏—Å—Ç–µ–º –≤ –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ. **–¢–µ–ø–µ—Ä—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∞–≥–µ–Ω—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –í–°–ï –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ Agno –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π!** üöÄ
